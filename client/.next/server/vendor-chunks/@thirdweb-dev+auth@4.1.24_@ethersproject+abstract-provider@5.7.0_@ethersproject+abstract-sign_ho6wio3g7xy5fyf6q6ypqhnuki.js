"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@thirdweb-dev+auth@4.1.24_@ethersproject+abstract-provider@5.7.0_@ethersproject+abstract-sign_ho6wio3g7xy5fyf6q6ypqhnuki";
exports.ids = ["vendor-chunks/@thirdweb-dev+auth@4.1.24_@ethersproject+abstract-provider@5.7.0_@ethersproject+abstract-sign_ho6wio3g7xy5fyf6q6ypqhnuki"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@thirdweb-dev+auth@4.1.24_@ethersproject+abstract-provider@5.7.0_@ethersproject+abstract-sign_ho6wio3g7xy5fyf6q6ypqhnuki/node_modules/@thirdweb-dev/auth/dist/auth-3e6bcaed.esm.js":
/*!***************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@thirdweb-dev+auth@4.1.24_@ethersproject+abstract-provider@5.7.0_@ethersproject+abstract-sign_ho6wio3g7xy5fyf6q6ypqhnuki/node_modules/@thirdweb-dev/auth/dist/auth-3e6bcaed.esm.js ***!
  \***************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (/* binding */ AuthenticationPayloadDataSchema),\n/* harmony export */   G: () => (/* binding */ GenerateOptionsSchema),\n/* harmony export */   J: () => (/* binding */ JsonSchema),\n/* harmony export */   L: () => (/* binding */ LoginOptionsSchema),\n/* harmony export */   R: () => (/* binding */ RawDateSchema),\n/* harmony export */   T: () => (/* binding */ ThirdwebAuth),\n/* harmony export */   V: () => (/* binding */ VerifyOptionsSchema),\n/* harmony export */   a: () => (/* binding */ authenticateJWT),\n/* harmony export */   b: () => (/* binding */ buildJWT),\n/* harmony export */   c: () => (/* binding */ buildLoginPayload),\n/* harmony export */   d: () => (/* binding */ buildAndSignLoginPayload),\n/* harmony export */   e: () => (/* binding */ AuthenticationPayloadSchema),\n/* harmony export */   f: () => (/* binding */ AuthenticateOptionsSchema),\n/* harmony export */   g: () => (/* binding */ generateJWT),\n/* harmony export */   h: () => (/* binding */ AddressSchema),\n/* harmony export */   i: () => (/* binding */ AccountTypeSchema),\n/* harmony export */   j: () => (/* binding */ LoginPayloadDataSchema),\n/* harmony export */   k: () => (/* binding */ LoginPayloadSchema),\n/* harmony export */   l: () => (/* binding */ LoginPayloadOutputSchema),\n/* harmony export */   m: () => (/* binding */ RefreshOptionsSchema),\n/* harmony export */   n: () => (/* binding */ THIRDWEB_AUTH_ACTIVE_ACCOUNT_COOKIE),\n/* harmony export */   o: () => (/* binding */ THIRDWEB_AUTH_TOKEN_COOKIE_PREFIX),\n/* harmony export */   p: () => (/* binding */ parseJWT),\n/* harmony export */   q: () => (/* binding */ THIRDWEB_AUTH_DEFAULT_REFRESH_INTERVAL_IN_SECONDS),\n/* harmony export */   r: () => (/* binding */ refreshJWT),\n/* harmony export */   s: () => (/* binding */ signLoginPayload),\n/* harmony export */   t: () => (/* binding */ THIRDWEB_AUTH_DEFAULT_TOKEN_DURATION_IN_SECONDS),\n/* harmony export */   v: () => (/* binding */ verifyLoginPayload)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/.pnpm/zod@3.22.4/node_modules/zod/lib/index.mjs\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ethers */ \"(ssr)/./node_modules/.pnpm/@ethersproject+address@5.7.0/node_modules/@ethersproject/address/lib.esm/index.js\");\n\n\n\nconst literalSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.union([\n    zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean(),\n    zod__WEBPACK_IMPORTED_MODULE_0__.z.null()\n]);\nconst JsonSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.lazy(()=>zod__WEBPACK_IMPORTED_MODULE_0__.z.union([\n        literalSchema,\n        zod__WEBPACK_IMPORTED_MODULE_0__.z.array(JsonSchema),\n        zod__WEBPACK_IMPORTED_MODULE_0__.z.record(JsonSchema)\n    ]), {\n    invalid_type_error: \"Provided value was not valid JSON\"\n});\nconst AddressSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.string().refine((arg)=>ethers__WEBPACK_IMPORTED_MODULE_1__.isAddress(arg), (out)=>{\n    return {\n        message: `${out} is not a valid address`\n    };\n});\nconst RawDateSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.date().transform((i)=>{\n    return Math.floor(i.getTime() / 1000);\n});\nconst AccountTypeSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"evm\");\nconst AuthenticationPayloadDataSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    iss: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    sub: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    aud: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    exp: RawDateSchema,\n    nbf: RawDateSchema,\n    iat: RawDateSchema,\n    jti: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().default(()=>(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])()),\n    ctx: JsonSchema.optional()\n});\nconst AuthenticationPayloadSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    payload: AuthenticationPayloadDataSchema,\n    signature: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nconst AuthenticateOptionsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    domain: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    issuerAddress: AddressSchema.optional(),\n    validateTokenId: zod__WEBPACK_IMPORTED_MODULE_0__.z.function().args(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional()\n});\nconst VerifyOptionsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    domain: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    statement: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    uri: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    version: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    chainId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    validateNonce: zod__WEBPACK_IMPORTED_MODULE_0__.z.function().args(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional(),\n    resources: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional()\n});\nconst THIRDWEB_AUTH_COOKIE_PREFIX = `thirdweb_auth`;\nconst THIRDWEB_AUTH_TOKEN_COOKIE_PREFIX = `${THIRDWEB_AUTH_COOKIE_PREFIX}_token`;\nconst THIRDWEB_AUTH_ACTIVE_ACCOUNT_COOKIE = `${THIRDWEB_AUTH_COOKIE_PREFIX}_active_account`;\nconst THIRDWEB_AUTH_DEFAULT_LOGIN_PAYLOAD_DURATION_IN_SECONDS = 60 * 10;\nconst THIRDWEB_AUTH_DEFAULT_TOKEN_DURATION_IN_SECONDS = 60 * 60 * 24;\nconst THIRDWEB_AUTH_DEFAULT_REFRESH_INTERVAL_IN_SECONDS = 5;\nconst GenerateOptionsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    domain: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    tokenId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    expirationTime: zod__WEBPACK_IMPORTED_MODULE_0__.z.date().default(()=>new Date(Date.now() + 1000 * THIRDWEB_AUTH_DEFAULT_TOKEN_DURATION_IN_SECONDS)),\n    invalidBefore: zod__WEBPACK_IMPORTED_MODULE_0__.z.date().optional(),\n    session: zod__WEBPACK_IMPORTED_MODULE_0__.z.union([\n        JsonSchema,\n        zod__WEBPACK_IMPORTED_MODULE_0__.z.function().args(zod__WEBPACK_IMPORTED_MODULE_0__.z.string())\n    ]).optional(),\n    verifyOptions: VerifyOptionsSchema.omit({\n        domain: true\n    }).optional()\n});\nconst RefreshOptionsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    expirationTime: zod__WEBPACK_IMPORTED_MODULE_0__.z.date().default(()=>new Date(Date.now() + 1000 * THIRDWEB_AUTH_DEFAULT_TOKEN_DURATION_IN_SECONDS))\n});\nconst LoginOptionsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    domain: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    address: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    statement: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    uri: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    version: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    chainId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    nonce: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    expirationTime: zod__WEBPACK_IMPORTED_MODULE_0__.z.date().default(()=>new Date(Date.now() + 1000 * THIRDWEB_AUTH_DEFAULT_LOGIN_PAYLOAD_DURATION_IN_SECONDS)),\n    invalidBefore: zod__WEBPACK_IMPORTED_MODULE_0__.z.date().default(()=>new Date(Date.now() - 1000 * THIRDWEB_AUTH_DEFAULT_LOGIN_PAYLOAD_DURATION_IN_SECONDS)),\n    resources: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional()\n});\nconst LoginPayloadDataSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: AccountTypeSchema,\n    domain: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    address: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    statement: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().default(\"Please ensure that the domain above matches the URL of the current website.\"),\n    uri: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    version: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().default(\"1\"),\n    chain_id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    nonce: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().default(()=>(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])()),\n    issued_at: zod__WEBPACK_IMPORTED_MODULE_0__.z.date().default(new Date()).transform((d)=>d.toISOString()),\n    expiration_time: zod__WEBPACK_IMPORTED_MODULE_0__.z.date().transform((d)=>d.toISOString()),\n    invalid_before: zod__WEBPACK_IMPORTED_MODULE_0__.z.date().default(new Date()).transform((d)=>d.toISOString()),\n    resources: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional()\n});\nconst LoginPayloadSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    payload: LoginPayloadDataSchema,\n    signature: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nconst LoginPayloadOutputSchema = LoginPayloadSchema.extend({\n    payload: LoginPayloadDataSchema.extend({\n        issued_at: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        expiration_time: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        invalid_before: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })\n});\n/**\n * Create an EIP-4361 & CAIP-122 compliant message to sign based on the login payload\n */ function createLoginMessage(payload) {\n    const typeField = \"Ethereum\";\n    const header = `${payload.domain} wants you to sign in with your ${typeField} account:`;\n    let prefix = [\n        header,\n        payload.address\n    ].join(\"\\n\");\n    prefix = [\n        prefix,\n        payload.statement\n    ].join(\"\\n\\n\");\n    if (payload.statement) {\n        prefix += \"\\n\";\n    }\n    const suffixArray = [];\n    if (payload.uri) {\n        const uriField = `URI: ${payload.uri}`;\n        suffixArray.push(uriField);\n    }\n    const versionField = `Version: ${payload.version}`;\n    suffixArray.push(versionField);\n    if (payload.chain_id) {\n        const chainField = `Chain ID: ` + payload.chain_id || 0;\n        suffixArray.push(chainField);\n    }\n    const nonceField = `Nonce: ${payload.nonce}`;\n    suffixArray.push(nonceField);\n    const issuedAtField = `Issued At: ${payload.issued_at}`;\n    suffixArray.push(issuedAtField);\n    const expiryField = `Expiration Time: ${payload.expiration_time}`;\n    suffixArray.push(expiryField);\n    if (payload.invalid_before) {\n        const invalidBeforeField = `Not Before: ${payload.invalid_before}`;\n        suffixArray.push(invalidBeforeField);\n    }\n    if (payload.resources) {\n        suffixArray.push([\n            `Resources:`,\n            ...payload.resources.map((x)=>`- ${x}`)\n        ].join(\"\\n\"));\n    }\n    const suffix = suffixArray.join(\"\\n\");\n    return [\n        prefix,\n        suffix\n    ].join(\"\\n\");\n}\nasync function buildLoginPayload(_ref) {\n    let { wallet, options } = _ref;\n    const parsedOptions = LoginOptionsSchema.parse(options);\n    let chainId = parsedOptions?.chainId;\n    if (!chainId && wallet.getChainId) {\n        try {\n            chainId = (await wallet.getChainId()).toString();\n        } catch  {\n        // ignore error\n        }\n    }\n    return LoginPayloadDataSchema.parse({\n        type: wallet.type,\n        domain: parsedOptions.domain,\n        address: parsedOptions?.address || await wallet.getAddress(),\n        statement: parsedOptions?.statement,\n        version: parsedOptions?.version,\n        uri: parsedOptions?.uri,\n        chain_id: chainId,\n        nonce: parsedOptions?.nonce,\n        expiration_time: parsedOptions.expirationTime,\n        invalid_before: parsedOptions.invalidBefore,\n        resources: parsedOptions?.resources\n    });\n}\nasync function signLoginPayload(_ref2) {\n    let { wallet, payload } = _ref2;\n    const message = createLoginMessage(payload);\n    const signature = await wallet.signMessage(message);\n    return {\n        payload,\n        signature\n    };\n}\nasync function buildAndSignLoginPayload(_ref3) {\n    let { wallet, options } = _ref3;\n    const payload = await buildLoginPayload({\n        wallet,\n        options\n    });\n    return signLoginPayload({\n        wallet,\n        payload\n    });\n}\nasync function verifyLoginPayload(_ref4) {\n    let { wallet, payload, options } = _ref4;\n    const parsedOptions = VerifyOptionsSchema.parse(options);\n    if (payload.payload.type !== wallet.type) {\n        throw new Error(`Expected chain type '${wallet.type}' does not match chain type on payload '${payload.payload.type}'`);\n    }\n    // Check that the intended domain matches the domain of the payload\n    if (payload.payload.domain !== parsedOptions.domain) {\n        throw new Error(`Expected domain '${parsedOptions.domain}' does not match domain on payload '${payload.payload.domain}'`);\n    }\n    // Check that the payload statement matches the expected statement\n    if (parsedOptions?.statement) {\n        if (payload.payload.statement !== parsedOptions.statement) {\n            throw new Error(`Expected statement '${parsedOptions.statement}' does not match statement on payload '${payload.payload.statement}'`);\n        }\n    }\n    // Check that the intended URI matches the URI of the payload\n    if (parsedOptions?.uri) {\n        if (payload.payload.uri !== parsedOptions.uri) {\n            throw new Error(`Expected URI '${parsedOptions.uri}' does not match URI on payload '${payload.payload.uri}'`);\n        }\n    }\n    // Check that the intended version matches the version of the payload\n    if (parsedOptions?.version) {\n        if (payload.payload.version !== parsedOptions.version) {\n            throw new Error(`Expected version '${parsedOptions.version}' does not match version on payload '${payload.payload.version}'`);\n        }\n    }\n    // Check that the intended chain ID matches the chain ID of the payload\n    if (parsedOptions?.chainId) {\n        if (payload.payload.chain_id !== parsedOptions.chainId) {\n            throw new Error(`Expected chain ID '${parsedOptions.chainId}' does not match chain ID on payload '${payload.payload.chain_id}'`);\n        }\n    }\n    // Check that the payload nonce is valid\n    if (parsedOptions?.validateNonce !== undefined) {\n        try {\n            await parsedOptions.validateNonce(payload.payload.nonce);\n        } catch (err) {\n            throw new Error(`Login request nonce is invalid`);\n        }\n    }\n    // Check that it isn't before the invalid before time\n    const currentTime = new Date();\n    if (currentTime < new Date(payload.payload.invalid_before)) {\n        throw new Error(`Login request is not yet valid`);\n    }\n    // Check that the payload hasn't expired\n    if (currentTime > new Date(payload.payload.expiration_time)) {\n        throw new Error(`Login request has expired`);\n    }\n    // Check that the specified resources are present on the payload\n    if (parsedOptions?.resources) {\n        const missingResources = parsedOptions.resources.filter((resource)=>!payload.payload.resources?.includes(resource));\n        if (missingResources.length > 0) {\n            throw new Error(`Login request is missing required resources: ${missingResources.join(\", \")}`);\n        }\n    }\n    // Check that the signing address is the claimed wallet address\n    const message = createLoginMessage(payload.payload);\n    const chainId = wallet.type === \"evm\" && payload.payload.chain_id ? parseInt(payload.payload.chain_id) : undefined;\n    const verified = await wallet.verifySignature(message, payload.signature, payload.payload.address, chainId);\n    if (!verified) {\n        throw new Error(`Signer address does not match payload address '${payload.payload.address.toLowerCase()}'`);\n    }\n    return payload.payload.address;\n}\nfunction isBrowser() {\n    return \"undefined\" !== \"undefined\";\n}\nfunction base64encode(data) {\n    if (isBrowser()) {\n        return window.btoa(data);\n    }\n    return Buffer.from(data).toString(\"base64\").replace(/=/g, \"\");\n}\nfunction base64decode(data) {\n    if (isBrowser()) {\n        return window.atob(data);\n    }\n    return Buffer.from(data, \"base64\").toString();\n}\n/**\n * Build JWT token based on the authentication payload\n */ async function buildJWT(_ref) {\n    let { wallet, payload } = _ref;\n    const payloadData = AuthenticationPayloadDataSchema.parse(payload);\n    const message = JSON.stringify(payloadData);\n    const signature = await wallet.signMessage(message);\n    // Header used for JWT token specifying hash algorithm\n    const header = {\n        // Specify ECDSA with SHA-256 for hashing algorithm\n        alg: \"ES256\",\n        typ: \"JWT\"\n    };\n    const encodedHeader = base64encode(JSON.stringify(header));\n    const encodedData = base64encode(JSON.stringify(payloadData));\n    const encodedSignature = base64encode(signature);\n    // Generate a JWT with base64 encoded header, payload, and signature\n    const jwt = `${encodedHeader}.${encodedData}.${encodedSignature}`;\n    return jwt;\n}\n/**\n * Generate a new JWT using a login payload\n */ async function generateJWT(_ref2) {\n    let { wallet, payload, options } = _ref2;\n    const parsedOptions = GenerateOptionsSchema.parse(options);\n    const userAddress = await verifyLoginPayload({\n        wallet,\n        payload,\n        options: {\n            domain: parsedOptions.domain,\n            ...parsedOptions.verifyOptions\n        }\n    });\n    let session = undefined;\n    if (typeof parsedOptions?.session === \"function\") {\n        const sessionTrigger = await parsedOptions.session(userAddress);\n        if (sessionTrigger) {\n            session = sessionTrigger;\n        }\n    } else {\n        session = parsedOptions?.session;\n    }\n    const adminAddress = await wallet.getAddress();\n    return buildJWT({\n        wallet,\n        payload: {\n            iss: adminAddress,\n            sub: userAddress,\n            aud: parsedOptions.domain,\n            nbf: parsedOptions?.invalidBefore || new Date(),\n            exp: parsedOptions.expirationTime,\n            iat: new Date(),\n            jti: parsedOptions?.tokenId,\n            ctx: session\n        }\n    });\n}\n/**\n * Parse data from an encoded auth JWT\n */ function parseJWT(jwt) {\n    const encodedPayload = jwt.split(\".\")[1];\n    const encodedSignature = jwt.split(\".\")[2];\n    const payload = JSON.parse(base64decode(encodedPayload));\n    const signature = base64decode(encodedSignature);\n    return {\n        payload,\n        signature\n    };\n}\n/**\n * Refresh an existing JWT\n */ async function refreshJWT(_ref3) {\n    let { wallet, jwt, options } = _ref3;\n    const { payload } = parseJWT(jwt);\n    const parsedOptions = RefreshOptionsSchema.parse(options);\n    return buildJWT({\n        wallet,\n        payload: {\n            iss: payload.iss,\n            sub: payload.sub,\n            aud: payload.aud,\n            nbf: new Date(),\n            exp: parsedOptions.expirationTime,\n            iat: new Date(),\n            ctx: payload.ctx\n        }\n    });\n}\n/**\n * Validate a JWT and extract the user's info\n */ async function authenticateJWT(_ref4) {\n    let { wallet, jwt, options } = _ref4;\n    const parsedOptions = AuthenticateOptionsSchema.parse(options);\n    const { payload, signature } = parseJWT(jwt);\n    // Check that the payload unique ID is valid\n    if (parsedOptions?.validateTokenId !== undefined) {\n        try {\n            await parsedOptions.validateTokenId(payload.jti);\n        } catch (err) {\n            throw new Error(`Token ID is invalid`);\n        }\n    }\n    // Check that the token audience matches the domain\n    if (payload.aud !== parsedOptions.domain) {\n        throw new Error(`Expected token to be for the domain '${parsedOptions.domain}', but found token with domain '${payload.aud}'`);\n    }\n    // Check that the token is past the invalid before time\n    const currentTime = Math.floor(new Date().getTime() / 1000);\n    if (currentTime < payload.nbf) {\n        throw new Error(`This token is invalid before epoch time '${payload.nbf}', current epoch time is '${currentTime}'`);\n    }\n    // Check that the token hasn't expired\n    if (currentTime > payload.exp) {\n        throw new Error(`This token expired at epoch time '${payload.exp}', current epoch time is '${currentTime}'`);\n    }\n    // Check that the connected wallet matches the token issuer\n    const issuerAddress = parsedOptions.issuerAddress ? parsedOptions.issuerAddress : await wallet.getAddress();\n    if (issuerAddress.toLowerCase() !== payload.iss.toLowerCase()) {\n        throw new Error(`The expected issuer address '${issuerAddress}' did not match the token issuer address '${payload.iss}'`);\n    }\n    let chainId = undefined;\n    if (wallet.getChainId) {\n        try {\n            chainId = await wallet.getChainId();\n        } catch  {\n        // ignore error\n        }\n    }\n    const verified = await wallet.verifySignature(JSON.stringify(payload), signature, issuerAddress, chainId);\n    if (!verified) {\n        throw new Error(`The expected signer address '${issuerAddress}' did not sign the token`);\n    }\n    return {\n        address: payload.sub,\n        session: payload.ctx\n    };\n}\nclass ThirdwebAuth {\n    constructor(wallet, domain){\n        this.wallet = wallet;\n        this.domain = domain;\n    }\n    updateWallet(wallet) {\n        this.wallet = wallet;\n    }\n    async payload(options) {\n        return buildLoginPayload({\n            wallet: this.wallet,\n            options: this.formatOptions(options)\n        });\n    }\n    async loginWithPayload(payload) {\n        return signLoginPayload({\n            wallet: this.wallet,\n            payload\n        });\n    }\n    async login(options) {\n        return buildAndSignLoginPayload({\n            wallet: this.wallet,\n            options: this.formatOptions(options)\n        });\n    }\n    async verify(payload, options) {\n        return verifyLoginPayload({\n            wallet: this.wallet,\n            payload,\n            options: this.formatOptions(options)\n        });\n    }\n    async generate(payload, options) {\n        return generateJWT({\n            wallet: this.wallet,\n            payload,\n            options: this.formatOptions(options)\n        });\n    }\n    async refresh(jwt, expirationTime) {\n        return refreshJWT({\n            wallet: this.wallet,\n            jwt,\n            options: {\n                expirationTime\n            }\n        });\n    }\n    async authenticate(jwt, options) {\n        return authenticateJWT({\n            wallet: this.wallet,\n            jwt,\n            options: this.formatOptions(options)\n        });\n    }\n    parseToken(jwt) {\n        return parseJWT(jwt);\n    }\n    formatOptions(options) {\n        return options ? {\n            ...options,\n            domain: options?.domain || this.domain\n        } : {\n            domain: this.domain\n        };\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHRoaXJkd2ViLWRldithdXRoQDQuMS4yNF9AZXRoZXJzcHJvamVjdCthYnN0cmFjdC1wcm92aWRlckA1LjcuMF9AZXRoZXJzcHJvamVjdCthYnN0cmFjdC1zaWduX2hvNndpbzNnN3h5NWZ5ZjZxNnlwcWhudWtpL25vZGVfbW9kdWxlcy9AdGhpcmR3ZWItZGV2L2F1dGgvZGlzdC9hdXRoLTNlNmJjYWVkLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQ0U7QUFDSztBQUUvQixNQUFNRyxnQkFBZ0JILGtDQUFDQSxDQUFDSSxLQUFLLENBQUM7SUFBQ0osa0NBQUNBLENBQUNLLE1BQU07SUFBSUwsa0NBQUNBLENBQUNNLE1BQU07SUFBSU4sa0NBQUNBLENBQUNPLE9BQU87SUFBSVAsa0NBQUNBLENBQUNRLElBQUk7Q0FBRztBQUM3RSxNQUFNQyxhQUFhVCxrQ0FBQ0EsQ0FBQ1UsSUFBSSxDQUFDLElBQU1WLGtDQUFDQSxDQUFDSSxLQUFLLENBQUM7UUFBQ0Q7UUFBZUgsa0NBQUNBLENBQUNXLEtBQUssQ0FBQ0Y7UUFBYVQsa0NBQUNBLENBQUNZLE1BQU0sQ0FBQ0g7S0FBWSxHQUFHO0lBQ25HSSxvQkFBb0I7QUFDdEI7QUFDQSxNQUFNQyxnQkFBZ0JkLGtDQUFDQSxDQUFDSyxNQUFNLEdBQUdVLE1BQU0sQ0FBQ0MsQ0FBQUEsTUFBT2QsNkNBQWUsQ0FBQ2MsTUFBTUUsQ0FBQUE7SUFDbkUsT0FBTztRQUNMQyxTQUFTLENBQUMsRUFBRUQsSUFBSSx1QkFBdUIsQ0FBQztJQUMxQztBQUNGO0FBQ0EsTUFBTUUsZ0JBQWdCcEIsa0NBQUNBLENBQUNxQixJQUFJLEdBQUdDLFNBQVMsQ0FBQ0MsQ0FBQUE7SUFDdkMsT0FBT0MsS0FBS0MsS0FBSyxDQUFDRixFQUFFRyxPQUFPLEtBQUs7QUFDbEM7QUFDQSxNQUFNQyxvQkFBb0IzQixrQ0FBQ0EsQ0FBQzRCLE9B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Q25COEM7WUFDQTdDLFNBQVMsSUFBSSxDQUFDMEQsYUFBYSxDQUFDMUQ7UUFDOUI7SUFDRjtJQUNBaUUsV0FBV3BCLEdBQUcsRUFBRTtRQUNkLE9BQU9LLFNBQVNMO0lBQ2xCO0lBQ0FhLGNBQWMxRCxPQUFPLEVBQUU7UUFDckIsT0FBT0EsVUFBVTtZQUNmLEdBQUdBLE9BQU87WUFDVjlELFFBQVE4RCxTQUFTOUQsVUFBVSxJQUFJLENBQUNBLE1BQU07UUFDeEMsSUFBSTtZQUNGQSxRQUFRLElBQUksQ0FBQ0EsTUFBTTtRQUNyQjtJQUNGO0FBQ0Y7QUFFbXhCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2xpZW50Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0B0aGlyZHdlYi1kZXYrYXV0aEA0LjEuMjRfQGV0aGVyc3Byb2plY3QrYWJzdHJhY3QtcHJvdmlkZXJANS43LjBfQGV0aGVyc3Byb2plY3QrYWJzdHJhY3Qtc2lnbl9obzZ3aW8zZzd4eTVmeWY2cTZ5cHFobnVraS9ub2RlX21vZHVsZXMvQHRoaXJkd2ViLWRldi9hdXRoL2Rpc3QvYXV0aC0zZTZiY2FlZC5lc20uanM/NmVlNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgeyB1dGlscyB9IGZyb20gJ2V0aGVycyc7XG5cbmNvbnN0IGxpdGVyYWxTY2hlbWEgPSB6LnVuaW9uKFt6LnN0cmluZygpLCB6Lm51bWJlcigpLCB6LmJvb2xlYW4oKSwgei5udWxsKCldKTtcbmNvbnN0IEpzb25TY2hlbWEgPSB6LmxhenkoKCkgPT4gei51bmlvbihbbGl0ZXJhbFNjaGVtYSwgei5hcnJheShKc29uU2NoZW1hKSwgei5yZWNvcmQoSnNvblNjaGVtYSldKSwge1xuICBpbnZhbGlkX3R5cGVfZXJyb3I6IFwiUHJvdmlkZWQgdmFsdWUgd2FzIG5vdCB2YWxpZCBKU09OXCJcbn0pO1xuY29uc3QgQWRkcmVzc1NjaGVtYSA9IHouc3RyaW5nKCkucmVmaW5lKGFyZyA9PiB1dGlscy5pc0FkZHJlc3MoYXJnKSwgb3V0ID0+IHtcbiAgcmV0dXJuIHtcbiAgICBtZXNzYWdlOiBgJHtvdXR9IGlzIG5vdCBhIHZhbGlkIGFkZHJlc3NgXG4gIH07XG59KTtcbmNvbnN0IFJhd0RhdGVTY2hlbWEgPSB6LmRhdGUoKS50cmFuc2Zvcm0oaSA9PiB7XG4gIHJldHVybiBNYXRoLmZsb29yKGkuZ2V0VGltZSgpIC8gMTAwMCk7XG59KTtcbmNvbnN0IEFjY291bnRUeXBlU2NoZW1hID0gei5saXRlcmFsKFwiZXZtXCIpO1xuXG5jb25zdCBBdXRoZW50aWNhdGlvblBheWxvYWREYXRhU2NoZW1hID0gei5vYmplY3Qoe1xuICBpc3M6IHouc3RyaW5nKCksXG4gIHN1Yjogei5zdHJpbmcoKSxcbiAgYXVkOiB6LnN0cmluZygpLFxuICBleHA6IFJhd0RhdGVTY2hlbWEsXG4gIG5iZjogUmF3RGF0ZVNjaGVtYSxcbiAgaWF0OiBSYXdEYXRlU2NoZW1hLFxuICBqdGk6IHouc3RyaW5nKCkuZGVmYXVsdCgoKSA9PiB2NCgpKSxcbiAgY3R4OiBKc29uU2NoZW1hLm9wdGlvbmFsKClcbn0pO1xuY29uc3QgQXV0aGVudGljYXRpb25QYXlsb2FkU2NoZW1hID0gei5vYmplY3Qoe1xuICBwYXlsb2FkOiBBdXRoZW50aWNhdGlvblBheWxvYWREYXRhU2NoZW1hLFxuICBzaWduYXR1cmU6IHouc3RyaW5nKClcbn0pO1xuY29uc3QgQXV0aGVudGljYXRlT3B0aW9uc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgZG9tYWluOiB6LnN0cmluZygpLFxuICBpc3N1ZXJBZGRyZXNzOiBBZGRyZXNzU2NoZW1hLm9wdGlvbmFsKCksXG4gIHZhbGlkYXRlVG9rZW5JZDogei5mdW5jdGlvbigpLmFyZ3Moei5zdHJpbmcoKSkub3B0aW9uYWwoKVxufSk7XG5cbmNvbnN0IFZlcmlmeU9wdGlvbnNTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGRvbWFpbjogei5zdHJpbmcoKSxcbiAgc3RhdGVtZW50OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHVyaTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB2ZXJzaW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGNoYWluSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgdmFsaWRhdGVOb25jZTogei5mdW5jdGlvbigpLmFyZ3Moei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgcmVzb3VyY2VzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKClcbn0pO1xuXG5jb25zdCBUSElSRFdFQl9BVVRIX0NPT0tJRV9QUkVGSVggPSBgdGhpcmR3ZWJfYXV0aGA7XG5jb25zdCBUSElSRFdFQl9BVVRIX1RPS0VOX0NPT0tJRV9QUkVGSVggPSBgJHtUSElSRFdFQl9BVVRIX0NPT0tJRV9QUkVGSVh9X3Rva2VuYDtcbmNvbnN0IFRISVJEV0VCX0FVVEhfQUNUSVZFX0FDQ09VTlRfQ09PS0lFID0gYCR7VEhJUkRXRUJfQVVUSF9DT09LSUVfUFJFRklYfV9hY3RpdmVfYWNjb3VudGA7XG5jb25zdCBUSElSRFdFQl9BVVRIX0RFRkFVTFRfTE9HSU5fUEFZTE9BRF9EVVJBVElPTl9JTl9TRUNPTkRTID0gNjAgKiAxMDtcbmNvbnN0IFRISVJEV0VCX0FVVEhfREVGQVVMVF9UT0tFTl9EVVJBVElPTl9JTl9TRUNPTkRTID0gNjAgKiA2MCAqIDI0O1xuY29uc3QgVEhJUkRXRUJfQVVUSF9ERUZBVUxUX1JFRlJFU0hfSU5URVJWQUxfSU5fU0VDT05EUyA9IDU7XG5cbmNvbnN0IEdlbmVyYXRlT3B0aW9uc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgZG9tYWluOiB6LnN0cmluZygpLFxuICB0b2tlbklkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGV4cGlyYXRpb25UaW1lOiB6LmRhdGUoKS5kZWZhdWx0KCgpID0+IG5ldyBEYXRlKERhdGUubm93KCkgKyAxMDAwICogVEhJUkRXRUJfQVVUSF9ERUZBVUxUX1RPS0VOX0RVUkFUSU9OX0lOX1NFQ09ORFMpKSxcbiAgaW52YWxpZEJlZm9yZTogei5kYXRlKCkub3B0aW9uYWwoKSxcbiAgc2Vzc2lvbjogei51bmlvbihbSnNvblNjaGVtYSwgei5mdW5jdGlvbigpLmFyZ3Moei5zdHJpbmcoKSldKS5vcHRpb25hbCgpLFxuICB2ZXJpZnlPcHRpb25zOiBWZXJpZnlPcHRpb25zU2NoZW1hLm9taXQoe1xuICAgIGRvbWFpbjogdHJ1ZVxuICB9KS5vcHRpb25hbCgpXG59KTtcblxuY29uc3QgUmVmcmVzaE9wdGlvbnNTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGV4cGlyYXRpb25UaW1lOiB6LmRhdGUoKS5kZWZhdWx0KCgpID0+IG5ldyBEYXRlKERhdGUubm93KCkgKyAxMDAwICogVEhJUkRXRUJfQVVUSF9ERUZBVUxUX1RPS0VOX0RVUkFUSU9OX0lOX1NFQ09ORFMpKVxufSk7XG5cbmNvbnN0IExvZ2luT3B0aW9uc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgZG9tYWluOiB6LnN0cmluZygpLFxuICBhZGRyZXNzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHN0YXRlbWVudDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB1cmk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgdmVyc2lvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBjaGFpbklkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIG5vbmNlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGV4cGlyYXRpb25UaW1lOiB6LmRhdGUoKS5kZWZhdWx0KCgpID0+IG5ldyBEYXRlKERhdGUubm93KCkgKyAxMDAwICogVEhJUkRXRUJfQVVUSF9ERUZBVUxUX0xPR0lOX1BBWUxPQURfRFVSQVRJT05fSU5fU0VDT05EUykpLFxuICBpbnZhbGlkQmVmb3JlOiB6LmRhdGUoKS5kZWZhdWx0KCgpID0+IG5ldyBEYXRlKERhdGUubm93KCkgLSAxMDAwICogVEhJUkRXRUJfQVVUSF9ERUZBVUxUX0xPR0lOX1BBWUxPQURfRFVSQVRJT05fSU5fU0VDT05EUykpLFxuICByZXNvdXJjZXM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBMb2dpblBheWxvYWREYXRhU2NoZW1hID0gei5vYmplY3Qoe1xuICB0eXBlOiBBY2NvdW50VHlwZVNjaGVtYSxcbiAgZG9tYWluOiB6LnN0cmluZygpLFxuICBhZGRyZXNzOiB6LnN0cmluZygpLFxuICBzdGF0ZW1lbnQ6IHouc3RyaW5nKCkuZGVmYXVsdChcIlBsZWFzZSBlbnN1cmUgdGhhdCB0aGUgZG9tYWluIGFib3ZlIG1hdGNoZXMgdGhlIFVSTCBvZiB0aGUgY3VycmVudCB3ZWJzaXRlLlwiKSxcbiAgdXJpOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHZlcnNpb246IHouc3RyaW5nKCkuZGVmYXVsdChcIjFcIiksXG4gIGNoYWluX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIG5vbmNlOiB6LnN0cmluZygpLmRlZmF1bHQoKCkgPT4gdjQoKSksXG4gIGlzc3VlZF9hdDogei5kYXRlKCkuZGVmYXVsdChuZXcgRGF0ZSgpKS50cmFuc2Zvcm0oZCA9PiBkLnRvSVNPU3RyaW5nKCkpLFxuICBleHBpcmF0aW9uX3RpbWU6IHouZGF0ZSgpLnRyYW5zZm9ybShkID0+IGQudG9JU09TdHJpbmcoKSksXG4gIGludmFsaWRfYmVmb3JlOiB6LmRhdGUoKS5kZWZhdWx0KG5ldyBEYXRlKCkpLnRyYW5zZm9ybShkID0+IGQudG9JU09TdHJpbmcoKSksXG4gIHJlc291cmNlczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IExvZ2luUGF5bG9hZFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgcGF5bG9hZDogTG9naW5QYXlsb2FkRGF0YVNjaGVtYSxcbiAgc2lnbmF0dXJlOiB6LnN0cmluZygpXG59KTtcbmNvbnN0IExvZ2luUGF5bG9hZE91dHB1dFNjaGVtYSA9IExvZ2luUGF5bG9hZFNjaGVtYS5leHRlbmQoe1xuICBwYXlsb2FkOiBMb2dpblBheWxvYWREYXRhU2NoZW1hLmV4dGVuZCh7XG4gICAgaXNzdWVkX2F0OiB6LnN0cmluZygpLFxuICAgIGV4cGlyYXRpb25fdGltZTogei5zdHJpbmcoKSxcbiAgICBpbnZhbGlkX2JlZm9yZTogei5zdHJpbmcoKVxuICB9KVxufSk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIEVJUC00MzYxICYgQ0FJUC0xMjIgY29tcGxpYW50IG1lc3NhZ2UgdG8gc2lnbiBiYXNlZCBvbiB0aGUgbG9naW4gcGF5bG9hZFxuICovXG5mdW5jdGlvbiBjcmVhdGVMb2dpbk1lc3NhZ2UocGF5bG9hZCkge1xuICBjb25zdCB0eXBlRmllbGQgPSBcIkV0aGVyZXVtXCI7XG4gIGNvbnN0IGhlYWRlciA9IGAke3BheWxvYWQuZG9tYWlufSB3YW50cyB5b3UgdG8gc2lnbiBpbiB3aXRoIHlvdXIgJHt0eXBlRmllbGR9IGFjY291bnQ6YDtcbiAgbGV0IHByZWZpeCA9IFtoZWFkZXIsIHBheWxvYWQuYWRkcmVzc10uam9pbihcIlxcblwiKTtcbiAgcHJlZml4ID0gW3ByZWZpeCwgcGF5bG9hZC5zdGF0ZW1lbnRdLmpvaW4oXCJcXG5cXG5cIik7XG4gIGlmIChwYXlsb2FkLnN0YXRlbWVudCkge1xuICAgIHByZWZpeCArPSBcIlxcblwiO1xuICB9XG4gIGNvbnN0IHN1ZmZpeEFycmF5ID0gW107XG4gIGlmIChwYXlsb2FkLnVyaSkge1xuICAgIGNvbnN0IHVyaUZpZWxkID0gYFVSSTogJHtwYXlsb2FkLnVyaX1gO1xuICAgIHN1ZmZpeEFycmF5LnB1c2godXJpRmllbGQpO1xuICB9XG4gIGNvbnN0IHZlcnNpb25GaWVsZCA9IGBWZXJzaW9uOiAke3BheWxvYWQudmVyc2lvbn1gO1xuICBzdWZmaXhBcnJheS5wdXNoKHZlcnNpb25GaWVsZCk7XG4gIGlmIChwYXlsb2FkLmNoYWluX2lkKSB7XG4gICAgY29uc3QgY2hhaW5GaWVsZCA9IGBDaGFpbiBJRDogYCArIHBheWxvYWQuY2hhaW5faWQgfHwgXCIxXCI7XG4gICAgc3VmZml4QXJyYXkucHVzaChjaGFpbkZpZWxkKTtcbiAgfVxuICBjb25zdCBub25jZUZpZWxkID0gYE5vbmNlOiAke3BheWxvYWQubm9uY2V9YDtcbiAgc3VmZml4QXJyYXkucHVzaChub25jZUZpZWxkKTtcbiAgY29uc3QgaXNzdWVkQXRGaWVsZCA9IGBJc3N1ZWQgQXQ6ICR7cGF5bG9hZC5pc3N1ZWRfYXR9YDtcbiAgc3VmZml4QXJyYXkucHVzaChpc3N1ZWRBdEZpZWxkKTtcbiAgY29uc3QgZXhwaXJ5RmllbGQgPSBgRXhwaXJhdGlvbiBUaW1lOiAke3BheWxvYWQuZXhwaXJhdGlvbl90aW1lfWA7XG4gIHN1ZmZpeEFycmF5LnB1c2goZXhwaXJ5RmllbGQpO1xuICBpZiAocGF5bG9hZC5pbnZhbGlkX2JlZm9yZSkge1xuICAgIGNvbnN0IGludmFsaWRCZWZvcmVGaWVsZCA9IGBOb3QgQmVmb3JlOiAke3BheWxvYWQuaW52YWxpZF9iZWZvcmV9YDtcbiAgICBzdWZmaXhBcnJheS5wdXNoKGludmFsaWRCZWZvcmVGaWVsZCk7XG4gIH1cbiAgaWYgKHBheWxvYWQucmVzb3VyY2VzKSB7XG4gICAgc3VmZml4QXJyYXkucHVzaChbYFJlc291cmNlczpgLCAuLi5wYXlsb2FkLnJlc291cmNlcy5tYXAoeCA9PiBgLSAke3h9YCldLmpvaW4oXCJcXG5cIikpO1xuICB9XG4gIGNvbnN0IHN1ZmZpeCA9IHN1ZmZpeEFycmF5LmpvaW4oXCJcXG5cIik7XG4gIHJldHVybiBbcHJlZml4LCBzdWZmaXhdLmpvaW4oXCJcXG5cIik7XG59XG5hc3luYyBmdW5jdGlvbiBidWlsZExvZ2luUGF5bG9hZChfcmVmKSB7XG4gIGxldCB7XG4gICAgd2FsbGV0LFxuICAgIG9wdGlvbnNcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHBhcnNlZE9wdGlvbnMgPSBMb2dpbk9wdGlvbnNTY2hlbWEucGFyc2Uob3B0aW9ucyk7XG4gIGxldCBjaGFpbklkID0gcGFyc2VkT3B0aW9ucz8uY2hhaW5JZDtcbiAgaWYgKCFjaGFpbklkICYmIHdhbGxldC5nZXRDaGFpbklkKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNoYWluSWQgPSAoYXdhaXQgd2FsbGV0LmdldENoYWluSWQoKSkudG9TdHJpbmcoKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIGlnbm9yZSBlcnJvclxuICAgIH1cbiAgfVxuICByZXR1cm4gTG9naW5QYXlsb2FkRGF0YVNjaGVtYS5wYXJzZSh7XG4gICAgdHlwZTogd2FsbGV0LnR5cGUsXG4gICAgZG9tYWluOiBwYXJzZWRPcHRpb25zLmRvbWFpbixcbiAgICBhZGRyZXNzOiBwYXJzZWRPcHRpb25zPy5hZGRyZXNzIHx8IChhd2FpdCB3YWxsZXQuZ2V0QWRkcmVzcygpKSxcbiAgICBzdGF0ZW1lbnQ6IHBhcnNlZE9wdGlvbnM/LnN0YXRlbWVudCxcbiAgICB2ZXJzaW9uOiBwYXJzZWRPcHRpb25zPy52ZXJzaW9uLFxuICAgIHVyaTogcGFyc2VkT3B0aW9ucz8udXJpLFxuICAgIGNoYWluX2lkOiBjaGFpbklkLFxuICAgIG5vbmNlOiBwYXJzZWRPcHRpb25zPy5ub25jZSxcbiAgICBleHBpcmF0aW9uX3RpbWU6IHBhcnNlZE9wdGlvbnMuZXhwaXJhdGlvblRpbWUsXG4gICAgaW52YWxpZF9iZWZvcmU6IHBhcnNlZE9wdGlvbnMuaW52YWxpZEJlZm9yZSxcbiAgICByZXNvdXJjZXM6IHBhcnNlZE9wdGlvbnM/LnJlc291cmNlc1xuICB9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHNpZ25Mb2dpblBheWxvYWQoX3JlZjIpIHtcbiAgbGV0IHtcbiAgICB3YWxsZXQsXG4gICAgcGF5bG9hZFxuICB9ID0gX3JlZjI7XG4gIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVMb2dpbk1lc3NhZ2UocGF5bG9hZCk7XG4gIGNvbnN0IHNpZ25hdHVyZSA9IGF3YWl0IHdhbGxldC5zaWduTWVzc2FnZShtZXNzYWdlKTtcbiAgcmV0dXJuIHtcbiAgICBwYXlsb2FkLFxuICAgIHNpZ25hdHVyZVxuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gYnVpbGRBbmRTaWduTG9naW5QYXlsb2FkKF9yZWYzKSB7XG4gIGxldCB7XG4gICAgd2FsbGV0LFxuICAgIG9wdGlvbnNcbiAgfSA9IF9yZWYzO1xuICBjb25zdCBwYXlsb2FkID0gYXdhaXQgYnVpbGRMb2dpblBheWxvYWQoe1xuICAgIHdhbGxldCxcbiAgICBvcHRpb25zXG4gIH0pO1xuICByZXR1cm4gc2lnbkxvZ2luUGF5bG9hZCh7XG4gICAgd2FsbGV0LFxuICAgIHBheWxvYWRcbiAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlMb2dpblBheWxvYWQoX3JlZjQpIHtcbiAgbGV0IHtcbiAgICB3YWxsZXQsXG4gICAgcGF5bG9hZCxcbiAgICBvcHRpb25zXG4gIH0gPSBfcmVmNDtcbiAgY29uc3QgcGFyc2VkT3B0aW9ucyA9IFZlcmlmeU9wdGlvbnNTY2hlbWEucGFyc2Uob3B0aW9ucyk7XG4gIGlmIChwYXlsb2FkLnBheWxvYWQudHlwZSAhPT0gd2FsbGV0LnR5cGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGNoYWluIHR5cGUgJyR7d2FsbGV0LnR5cGV9JyBkb2VzIG5vdCBtYXRjaCBjaGFpbiB0eXBlIG9uIHBheWxvYWQgJyR7cGF5bG9hZC5wYXlsb2FkLnR5cGV9J2ApO1xuICB9XG5cbiAgLy8gQ2hlY2sgdGhhdCB0aGUgaW50ZW5kZWQgZG9tYWluIG1hdGNoZXMgdGhlIGRvbWFpbiBvZiB0aGUgcGF5bG9hZFxuICBpZiAocGF5bG9hZC5wYXlsb2FkLmRvbWFpbiAhPT0gcGFyc2VkT3B0aW9ucy5kb21haW4pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGRvbWFpbiAnJHtwYXJzZWRPcHRpb25zLmRvbWFpbn0nIGRvZXMgbm90IG1hdGNoIGRvbWFpbiBvbiBwYXlsb2FkICcke3BheWxvYWQucGF5bG9hZC5kb21haW59J2ApO1xuICB9XG5cbiAgLy8gQ2hlY2sgdGhhdCB0aGUgcGF5bG9hZCBzdGF0ZW1lbnQgbWF0Y2hlcyB0aGUgZXhwZWN0ZWQgc3RhdGVtZW50XG4gIGlmIChwYXJzZWRPcHRpb25zPy5zdGF0ZW1lbnQpIHtcbiAgICBpZiAocGF5bG9hZC5wYXlsb2FkLnN0YXRlbWVudCAhPT0gcGFyc2VkT3B0aW9ucy5zdGF0ZW1lbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgc3RhdGVtZW50ICcke3BhcnNlZE9wdGlvbnMuc3RhdGVtZW50fScgZG9lcyBub3QgbWF0Y2ggc3RhdGVtZW50IG9uIHBheWxvYWQgJyR7cGF5bG9hZC5wYXlsb2FkLnN0YXRlbWVudH0nYCk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgdGhhdCB0aGUgaW50ZW5kZWQgVVJJIG1hdGNoZXMgdGhlIFVSSSBvZiB0aGUgcGF5bG9hZFxuICBpZiAocGFyc2VkT3B0aW9ucz8udXJpKSB7XG4gICAgaWYgKHBheWxvYWQucGF5bG9hZC51cmkgIT09IHBhcnNlZE9wdGlvbnMudXJpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIFVSSSAnJHtwYXJzZWRPcHRpb25zLnVyaX0nIGRvZXMgbm90IG1hdGNoIFVSSSBvbiBwYXlsb2FkICcke3BheWxvYWQucGF5bG9hZC51cml9J2ApO1xuICAgIH1cbiAgfVxuXG4gIC8vIENoZWNrIHRoYXQgdGhlIGludGVuZGVkIHZlcnNpb24gbWF0Y2hlcyB0aGUgdmVyc2lvbiBvZiB0aGUgcGF5bG9hZFxuICBpZiAocGFyc2VkT3B0aW9ucz8udmVyc2lvbikge1xuICAgIGlmIChwYXlsb2FkLnBheWxvYWQudmVyc2lvbiAhPT0gcGFyc2VkT3B0aW9ucy52ZXJzaW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIHZlcnNpb24gJyR7cGFyc2VkT3B0aW9ucy52ZXJzaW9ufScgZG9lcyBub3QgbWF0Y2ggdmVyc2lvbiBvbiBwYXlsb2FkICcke3BheWxvYWQucGF5bG9hZC52ZXJzaW9ufSdgKTtcbiAgICB9XG4gIH1cblxuICAvLyBDaGVjayB0aGF0IHRoZSBpbnRlbmRlZCBjaGFpbiBJRCBtYXRjaGVzIHRoZSBjaGFpbiBJRCBvZiB0aGUgcGF5bG9hZFxuICBpZiAocGFyc2VkT3B0aW9ucz8uY2hhaW5JZCkge1xuICAgIGlmIChwYXlsb2FkLnBheWxvYWQuY2hhaW5faWQgIT09IHBhcnNlZE9wdGlvbnMuY2hhaW5JZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBjaGFpbiBJRCAnJHtwYXJzZWRPcHRpb25zLmNoYWluSWR9JyBkb2VzIG5vdCBtYXRjaCBjaGFpbiBJRCBvbiBwYXlsb2FkICcke3BheWxvYWQucGF5bG9hZC5jaGFpbl9pZH0nYCk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgdGhhdCB0aGUgcGF5bG9hZCBub25jZSBpcyB2YWxpZFxuICBpZiAocGFyc2VkT3B0aW9ucz8udmFsaWRhdGVOb25jZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHBhcnNlZE9wdGlvbnMudmFsaWRhdGVOb25jZShwYXlsb2FkLnBheWxvYWQubm9uY2UpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBMb2dpbiByZXF1ZXN0IG5vbmNlIGlzIGludmFsaWRgKTtcbiAgICB9XG4gIH1cblxuICAvLyBDaGVjayB0aGF0IGl0IGlzbid0IGJlZm9yZSB0aGUgaW52YWxpZCBiZWZvcmUgdGltZVxuICBjb25zdCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCk7XG4gIGlmIChjdXJyZW50VGltZSA8IG5ldyBEYXRlKHBheWxvYWQucGF5bG9hZC5pbnZhbGlkX2JlZm9yZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYExvZ2luIHJlcXVlc3QgaXMgbm90IHlldCB2YWxpZGApO1xuICB9XG5cbiAgLy8gQ2hlY2sgdGhhdCB0aGUgcGF5bG9hZCBoYXNuJ3QgZXhwaXJlZFxuICBpZiAoY3VycmVudFRpbWUgPiBuZXcgRGF0ZShwYXlsb2FkLnBheWxvYWQuZXhwaXJhdGlvbl90aW1lKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTG9naW4gcmVxdWVzdCBoYXMgZXhwaXJlZGApO1xuICB9XG5cbiAgLy8gQ2hlY2sgdGhhdCB0aGUgc3BlY2lmaWVkIHJlc291cmNlcyBhcmUgcHJlc2VudCBvbiB0aGUgcGF5bG9hZFxuICBpZiAocGFyc2VkT3B0aW9ucz8ucmVzb3VyY2VzKSB7XG4gICAgY29uc3QgbWlzc2luZ1Jlc291cmNlcyA9IHBhcnNlZE9wdGlvbnMucmVzb3VyY2VzLmZpbHRlcihyZXNvdXJjZSA9PiAhcGF5bG9hZC5wYXlsb2FkLnJlc291cmNlcz8uaW5jbHVkZXMocmVzb3VyY2UpKTtcbiAgICBpZiAobWlzc2luZ1Jlc291cmNlcy5sZW5ndGggPiAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYExvZ2luIHJlcXVlc3QgaXMgbWlzc2luZyByZXF1aXJlZCByZXNvdXJjZXM6ICR7bWlzc2luZ1Jlc291cmNlcy5qb2luKFwiLCBcIil9YCk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgdGhhdCB0aGUgc2lnbmluZyBhZGRyZXNzIGlzIHRoZSBjbGFpbWVkIHdhbGxldCBhZGRyZXNzXG4gIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVMb2dpbk1lc3NhZ2UocGF5bG9hZC5wYXlsb2FkKTtcbiAgY29uc3QgY2hhaW5JZCA9IHdhbGxldC50eXBlID09PSBcImV2bVwiICYmIHBheWxvYWQucGF5bG9hZC5jaGFpbl9pZCA/IHBhcnNlSW50KHBheWxvYWQucGF5bG9hZC5jaGFpbl9pZCkgOiB1bmRlZmluZWQ7XG4gIGNvbnN0IHZlcmlmaWVkID0gYXdhaXQgd2FsbGV0LnZlcmlmeVNpZ25hdHVyZShtZXNzYWdlLCBwYXlsb2FkLnNpZ25hdHVyZSwgcGF5bG9hZC5wYXlsb2FkLmFkZHJlc3MsIGNoYWluSWQpO1xuICBpZiAoIXZlcmlmaWVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBTaWduZXIgYWRkcmVzcyBkb2VzIG5vdCBtYXRjaCBwYXlsb2FkIGFkZHJlc3MgJyR7cGF5bG9hZC5wYXlsb2FkLmFkZHJlc3MudG9Mb3dlckNhc2UoKX0nYCk7XG4gIH1cbiAgcmV0dXJuIHBheWxvYWQucGF5bG9hZC5hZGRyZXNzO1xufVxuXG5mdW5jdGlvbiBpc0Jyb3dzZXIoKSB7XG4gIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiO1xufVxuZnVuY3Rpb24gYmFzZTY0ZW5jb2RlKGRhdGEpIHtcbiAgaWYgKGlzQnJvd3NlcigpKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5idG9hKGRhdGEpO1xuICB9XG4gIHJldHVybiBCdWZmZXIuZnJvbShkYXRhKS50b1N0cmluZyhcImJhc2U2NFwiKS5yZXBsYWNlKC89L2csIFwiXCIpO1xufVxuZnVuY3Rpb24gYmFzZTY0ZGVjb2RlKGRhdGEpIHtcbiAgaWYgKGlzQnJvd3NlcigpKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5hdG9iKGRhdGEpO1xuICB9XG4gIHJldHVybiBCdWZmZXIuZnJvbShkYXRhLCBcImJhc2U2NFwiKS50b1N0cmluZygpO1xufVxuXG4vKipcbiAqIEJ1aWxkIEpXVCB0b2tlbiBiYXNlZCBvbiB0aGUgYXV0aGVudGljYXRpb24gcGF5bG9hZFxuICovXG5hc3luYyBmdW5jdGlvbiBidWlsZEpXVChfcmVmKSB7XG4gIGxldCB7XG4gICAgd2FsbGV0LFxuICAgIHBheWxvYWRcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHBheWxvYWREYXRhID0gQXV0aGVudGljYXRpb25QYXlsb2FkRGF0YVNjaGVtYS5wYXJzZShwYXlsb2FkKTtcbiAgY29uc3QgbWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KHBheWxvYWREYXRhKTtcbiAgY29uc3Qgc2lnbmF0dXJlID0gYXdhaXQgd2FsbGV0LnNpZ25NZXNzYWdlKG1lc3NhZ2UpO1xuXG4gIC8vIEhlYWRlciB1c2VkIGZvciBKV1QgdG9rZW4gc3BlY2lmeWluZyBoYXNoIGFsZ29yaXRobVxuICBjb25zdCBoZWFkZXIgPSB7XG4gICAgLy8gU3BlY2lmeSBFQ0RTQSB3aXRoIFNIQS0yNTYgZm9yIGhhc2hpbmcgYWxnb3JpdGhtXG4gICAgYWxnOiBcIkVTMjU2XCIsXG4gICAgdHlwOiBcIkpXVFwiXG4gIH07XG4gIGNvbnN0IGVuY29kZWRIZWFkZXIgPSBiYXNlNjRlbmNvZGUoSlNPTi5zdHJpbmdpZnkoaGVhZGVyKSk7XG4gIGNvbnN0IGVuY29kZWREYXRhID0gYmFzZTY0ZW5jb2RlKEpTT04uc3RyaW5naWZ5KHBheWxvYWREYXRhKSk7XG4gIGNvbnN0IGVuY29kZWRTaWduYXR1cmUgPSBiYXNlNjRlbmNvZGUoc2lnbmF0dXJlKTtcblxuICAvLyBHZW5lcmF0ZSBhIEpXVCB3aXRoIGJhc2U2NCBlbmNvZGVkIGhlYWRlciwgcGF5bG9hZCwgYW5kIHNpZ25hdHVyZVxuICBjb25zdCBqd3QgPSBgJHtlbmNvZGVkSGVhZGVyfS4ke2VuY29kZWREYXRhfS4ke2VuY29kZWRTaWduYXR1cmV9YDtcbiAgcmV0dXJuIGp3dDtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIG5ldyBKV1QgdXNpbmcgYSBsb2dpbiBwYXlsb2FkXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlSldUKF9yZWYyKSB7XG4gIGxldCB7XG4gICAgd2FsbGV0LFxuICAgIHBheWxvYWQsXG4gICAgb3B0aW9uc1xuICB9ID0gX3JlZjI7XG4gIGNvbnN0IHBhcnNlZE9wdGlvbnMgPSBHZW5lcmF0ZU9wdGlvbnNTY2hlbWEucGFyc2Uob3B0aW9ucyk7XG4gIGNvbnN0IHVzZXJBZGRyZXNzID0gYXdhaXQgdmVyaWZ5TG9naW5QYXlsb2FkKHtcbiAgICB3YWxsZXQsXG4gICAgcGF5bG9hZCxcbiAgICBvcHRpb25zOiB7XG4gICAgICBkb21haW46IHBhcnNlZE9wdGlvbnMuZG9tYWluLFxuICAgICAgLi4ucGFyc2VkT3B0aW9ucy52ZXJpZnlPcHRpb25zXG4gICAgfVxuICB9KTtcbiAgbGV0IHNlc3Npb24gPSB1bmRlZmluZWQ7XG4gIGlmICh0eXBlb2YgcGFyc2VkT3B0aW9ucz8uc2Vzc2lvbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY29uc3Qgc2Vzc2lvblRyaWdnZXIgPSBhd2FpdCBwYXJzZWRPcHRpb25zLnNlc3Npb24odXNlckFkZHJlc3MpO1xuICAgIGlmIChzZXNzaW9uVHJpZ2dlcikge1xuICAgICAgc2Vzc2lvbiA9IHNlc3Npb25UcmlnZ2VyO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzZXNzaW9uID0gcGFyc2VkT3B0aW9ucz8uc2Vzc2lvbjtcbiAgfVxuICBjb25zdCBhZG1pbkFkZHJlc3MgPSBhd2FpdCB3YWxsZXQuZ2V0QWRkcmVzcygpO1xuICByZXR1cm4gYnVpbGRKV1Qoe1xuICAgIHdhbGxldCxcbiAgICBwYXlsb2FkOiB7XG4gICAgICBpc3M6IGFkbWluQWRkcmVzcyxcbiAgICAgIHN1YjogdXNlckFkZHJlc3MsXG4gICAgICBhdWQ6IHBhcnNlZE9wdGlvbnMuZG9tYWluLFxuICAgICAgbmJmOiBwYXJzZWRPcHRpb25zPy5pbnZhbGlkQmVmb3JlIHx8IG5ldyBEYXRlKCksXG4gICAgICBleHA6IHBhcnNlZE9wdGlvbnMuZXhwaXJhdGlvblRpbWUsXG4gICAgICBpYXQ6IG5ldyBEYXRlKCksXG4gICAgICBqdGk6IHBhcnNlZE9wdGlvbnM/LnRva2VuSWQsXG4gICAgICBjdHg6IHNlc3Npb25cbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFBhcnNlIGRhdGEgZnJvbSBhbiBlbmNvZGVkIGF1dGggSldUXG4gKi9cbmZ1bmN0aW9uIHBhcnNlSldUKGp3dCkge1xuICBjb25zdCBlbmNvZGVkUGF5bG9hZCA9IGp3dC5zcGxpdChcIi5cIilbMV07XG4gIGNvbnN0IGVuY29kZWRTaWduYXR1cmUgPSBqd3Quc3BsaXQoXCIuXCIpWzJdO1xuICBjb25zdCBwYXlsb2FkID0gSlNPTi5wYXJzZShiYXNlNjRkZWNvZGUoZW5jb2RlZFBheWxvYWQpKTtcbiAgY29uc3Qgc2lnbmF0dXJlID0gYmFzZTY0ZGVjb2RlKGVuY29kZWRTaWduYXR1cmUpO1xuICByZXR1cm4ge1xuICAgIHBheWxvYWQsXG4gICAgc2lnbmF0dXJlXG4gIH07XG59XG5cbi8qKlxuICogUmVmcmVzaCBhbiBleGlzdGluZyBKV1RcbiAqL1xuYXN5bmMgZnVuY3Rpb24gcmVmcmVzaEpXVChfcmVmMykge1xuICBsZXQge1xuICAgIHdhbGxldCxcbiAgICBqd3QsXG4gICAgb3B0aW9uc1xuICB9ID0gX3JlZjM7XG4gIGNvbnN0IHtcbiAgICBwYXlsb2FkXG4gIH0gPSBwYXJzZUpXVChqd3QpO1xuICBjb25zdCBwYXJzZWRPcHRpb25zID0gUmVmcmVzaE9wdGlvbnNTY2hlbWEucGFyc2Uob3B0aW9ucyk7XG4gIHJldHVybiBidWlsZEpXVCh7XG4gICAgd2FsbGV0LFxuICAgIHBheWxvYWQ6IHtcbiAgICAgIGlzczogcGF5bG9hZC5pc3MsXG4gICAgICBzdWI6IHBheWxvYWQuc3ViLFxuICAgICAgYXVkOiBwYXlsb2FkLmF1ZCxcbiAgICAgIG5iZjogbmV3IERhdGUoKSxcbiAgICAgIGV4cDogcGFyc2VkT3B0aW9ucy5leHBpcmF0aW9uVGltZSxcbiAgICAgIGlhdDogbmV3IERhdGUoKSxcbiAgICAgIGN0eDogcGF5bG9hZC5jdHhcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIGEgSldUIGFuZCBleHRyYWN0IHRoZSB1c2VyJ3MgaW5mb1xuICovXG5hc3luYyBmdW5jdGlvbiBhdXRoZW50aWNhdGVKV1QoX3JlZjQpIHtcbiAgbGV0IHtcbiAgICB3YWxsZXQsXG4gICAgand0LFxuICAgIG9wdGlvbnNcbiAgfSA9IF9yZWY0O1xuICBjb25zdCBwYXJzZWRPcHRpb25zID0gQXV0aGVudGljYXRlT3B0aW9uc1NjaGVtYS5wYXJzZShvcHRpb25zKTtcbiAgY29uc3Qge1xuICAgIHBheWxvYWQsXG4gICAgc2lnbmF0dXJlXG4gIH0gPSBwYXJzZUpXVChqd3QpO1xuXG4gIC8vIENoZWNrIHRoYXQgdGhlIHBheWxvYWQgdW5pcXVlIElEIGlzIHZhbGlkXG4gIGlmIChwYXJzZWRPcHRpb25zPy52YWxpZGF0ZVRva2VuSWQgIT09IHVuZGVmaW5lZCkge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwYXJzZWRPcHRpb25zLnZhbGlkYXRlVG9rZW5JZChwYXlsb2FkLmp0aSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRva2VuIElEIGlzIGludmFsaWRgKTtcbiAgICB9XG4gIH1cblxuICAvLyBDaGVjayB0aGF0IHRoZSB0b2tlbiBhdWRpZW5jZSBtYXRjaGVzIHRoZSBkb21haW5cbiAgaWYgKHBheWxvYWQuYXVkICE9PSBwYXJzZWRPcHRpb25zLmRvbWFpbikge1xuICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgdG9rZW4gdG8gYmUgZm9yIHRoZSBkb21haW4gJyR7cGFyc2VkT3B0aW9ucy5kb21haW59JywgYnV0IGZvdW5kIHRva2VuIHdpdGggZG9tYWluICcke3BheWxvYWQuYXVkfSdgKTtcbiAgfVxuXG4gIC8vIENoZWNrIHRoYXQgdGhlIHRva2VuIGlzIHBhc3QgdGhlIGludmFsaWQgYmVmb3JlIHRpbWVcbiAgY29uc3QgY3VycmVudFRpbWUgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7XG4gIGlmIChjdXJyZW50VGltZSA8IHBheWxvYWQubmJmKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGlzIHRva2VuIGlzIGludmFsaWQgYmVmb3JlIGVwb2NoIHRpbWUgJyR7cGF5bG9hZC5uYmZ9JywgY3VycmVudCBlcG9jaCB0aW1lIGlzICcke2N1cnJlbnRUaW1lfSdgKTtcbiAgfVxuXG4gIC8vIENoZWNrIHRoYXQgdGhlIHRva2VuIGhhc24ndCBleHBpcmVkXG4gIGlmIChjdXJyZW50VGltZSA+IHBheWxvYWQuZXhwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGlzIHRva2VuIGV4cGlyZWQgYXQgZXBvY2ggdGltZSAnJHtwYXlsb2FkLmV4cH0nLCBjdXJyZW50IGVwb2NoIHRpbWUgaXMgJyR7Y3VycmVudFRpbWV9J2ApO1xuICB9XG5cbiAgLy8gQ2hlY2sgdGhhdCB0aGUgY29ubmVjdGVkIHdhbGxldCBtYXRjaGVzIHRoZSB0b2tlbiBpc3N1ZXJcbiAgY29uc3QgaXNzdWVyQWRkcmVzcyA9IHBhcnNlZE9wdGlvbnMuaXNzdWVyQWRkcmVzcyA/IHBhcnNlZE9wdGlvbnMuaXNzdWVyQWRkcmVzcyA6IGF3YWl0IHdhbGxldC5nZXRBZGRyZXNzKCk7XG4gIGlmIChpc3N1ZXJBZGRyZXNzLnRvTG93ZXJDYXNlKCkgIT09IHBheWxvYWQuaXNzLnRvTG93ZXJDYXNlKCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBleHBlY3RlZCBpc3N1ZXIgYWRkcmVzcyAnJHtpc3N1ZXJBZGRyZXNzfScgZGlkIG5vdCBtYXRjaCB0aGUgdG9rZW4gaXNzdWVyIGFkZHJlc3MgJyR7cGF5bG9hZC5pc3N9J2ApO1xuICB9XG4gIGxldCBjaGFpbklkID0gdW5kZWZpbmVkO1xuICBpZiAod2FsbGV0LmdldENoYWluSWQpIHtcbiAgICB0cnkge1xuICAgICAgY2hhaW5JZCA9IGF3YWl0IHdhbGxldC5nZXRDaGFpbklkKCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBpZ25vcmUgZXJyb3JcbiAgICB9XG4gIH1cbiAgY29uc3QgdmVyaWZpZWQgPSBhd2FpdCB3YWxsZXQudmVyaWZ5U2lnbmF0dXJlKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLCBzaWduYXR1cmUsIGlzc3VlckFkZHJlc3MsIGNoYWluSWQpO1xuICBpZiAoIXZlcmlmaWVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgZXhwZWN0ZWQgc2lnbmVyIGFkZHJlc3MgJyR7aXNzdWVyQWRkcmVzc30nIGRpZCBub3Qgc2lnbiB0aGUgdG9rZW5gKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGFkZHJlc3M6IHBheWxvYWQuc3ViLFxuICAgIHNlc3Npb246IHBheWxvYWQuY3R4XG4gIH07XG59XG5cbmNsYXNzIFRoaXJkd2ViQXV0aCB7XG4gIGNvbnN0cnVjdG9yKHdhbGxldCwgZG9tYWluKSB7XG4gICAgdGhpcy53YWxsZXQgPSB3YWxsZXQ7XG4gICAgdGhpcy5kb21haW4gPSBkb21haW47XG4gIH1cbiAgdXBkYXRlV2FsbGV0KHdhbGxldCkge1xuICAgIHRoaXMud2FsbGV0ID0gd2FsbGV0O1xuICB9XG4gIGFzeW5jIHBheWxvYWQob3B0aW9ucykge1xuICAgIHJldHVybiBidWlsZExvZ2luUGF5bG9hZCh7XG4gICAgICB3YWxsZXQ6IHRoaXMud2FsbGV0LFxuICAgICAgb3B0aW9uczogdGhpcy5mb3JtYXRPcHRpb25zKG9wdGlvbnMpXG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgbG9naW5XaXRoUGF5bG9hZChwYXlsb2FkKSB7XG4gICAgcmV0dXJuIHNpZ25Mb2dpblBheWxvYWQoe1xuICAgICAgd2FsbGV0OiB0aGlzLndhbGxldCxcbiAgICAgIHBheWxvYWRcbiAgICB9KTtcbiAgfVxuICBhc3luYyBsb2dpbihvcHRpb25zKSB7XG4gICAgcmV0dXJuIGJ1aWxkQW5kU2lnbkxvZ2luUGF5bG9hZCh7XG4gICAgICB3YWxsZXQ6IHRoaXMud2FsbGV0LFxuICAgICAgb3B0aW9uczogdGhpcy5mb3JtYXRPcHRpb25zKG9wdGlvbnMpXG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgdmVyaWZ5KHBheWxvYWQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdmVyaWZ5TG9naW5QYXlsb2FkKHtcbiAgICAgIHdhbGxldDogdGhpcy53YWxsZXQsXG4gICAgICBwYXlsb2FkLFxuICAgICAgb3B0aW9uczogdGhpcy5mb3JtYXRPcHRpb25zKG9wdGlvbnMpXG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgZ2VuZXJhdGUocGF5bG9hZCwgb3B0aW9ucykge1xuICAgIHJldHVybiBnZW5lcmF0ZUpXVCh7XG4gICAgICB3YWxsZXQ6IHRoaXMud2FsbGV0LFxuICAgICAgcGF5bG9hZCxcbiAgICAgIG9wdGlvbnM6IHRoaXMuZm9ybWF0T3B0aW9ucyhvcHRpb25zKVxuICAgIH0pO1xuICB9XG4gIGFzeW5jIHJlZnJlc2goand0LCBleHBpcmF0aW9uVGltZSkge1xuICAgIHJldHVybiByZWZyZXNoSldUKHtcbiAgICAgIHdhbGxldDogdGhpcy53YWxsZXQsXG4gICAgICBqd3QsXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGV4cGlyYXRpb25UaW1lXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgYXV0aGVudGljYXRlKGp3dCwgb3B0aW9ucykge1xuICAgIHJldHVybiBhdXRoZW50aWNhdGVKV1Qoe1xuICAgICAgd2FsbGV0OiB0aGlzLndhbGxldCxcbiAgICAgIGp3dCxcbiAgICAgIG9wdGlvbnM6IHRoaXMuZm9ybWF0T3B0aW9ucyhvcHRpb25zKVxuICAgIH0pO1xuICB9XG4gIHBhcnNlVG9rZW4oand0KSB7XG4gICAgcmV0dXJuIHBhcnNlSldUKGp3dCk7XG4gIH1cbiAgZm9ybWF0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMgPyB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgZG9tYWluOiBvcHRpb25zPy5kb21haW4gfHwgdGhpcy5kb21haW5cbiAgICB9IDoge1xuICAgICAgZG9tYWluOiB0aGlzLmRvbWFpblxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IHsgQXV0aGVudGljYXRpb25QYXlsb2FkRGF0YVNjaGVtYSBhcyBBLCBHZW5lcmF0ZU9wdGlvbnNTY2hlbWEgYXMgRywgSnNvblNjaGVtYSBhcyBKLCBMb2dpbk9wdGlvbnNTY2hlbWEgYXMgTCwgUmF3RGF0ZVNjaGVtYSBhcyBSLCBUaGlyZHdlYkF1dGggYXMgVCwgVmVyaWZ5T3B0aW9uc1NjaGVtYSBhcyBWLCBhdXRoZW50aWNhdGVKV1QgYXMgYSwgYnVpbGRKV1QgYXMgYiwgYnVpbGRMb2dpblBheWxvYWQgYXMgYywgYnVpbGRBbmRTaWduTG9naW5QYXlsb2FkIGFzIGQsIEF1dGhlbnRpY2F0aW9uUGF5bG9hZFNjaGVtYSBhcyBlLCBBdXRoZW50aWNhdGVPcHRpb25zU2NoZW1hIGFzIGYsIGdlbmVyYXRlSldUIGFzIGcsIEFkZHJlc3NTY2hlbWEgYXMgaCwgQWNjb3VudFR5cGVTY2hlbWEgYXMgaSwgTG9naW5QYXlsb2FkRGF0YVNjaGVtYSBhcyBqLCBMb2dpblBheWxvYWRTY2hlbWEgYXMgaywgTG9naW5QYXlsb2FkT3V0cHV0U2NoZW1hIGFzIGwsIFJlZnJlc2hPcHRpb25zU2NoZW1hIGFzIG0sIFRISVJEV0VCX0FVVEhfQUNUSVZFX0FDQ09VTlRfQ09PS0lFIGFzIG4sIFRISVJEV0VCX0FVVEhfVE9LRU5fQ09PS0lFX1BSRUZJWCBhcyBvLCBwYXJzZUpXVCBhcyBwLCBUSElSRFdFQl9BVVRIX0RFRkFVTFRfUkVGUkVTSF9JTlRFUlZBTF9JTl9TRUNPTkRTIGFzIHEsIHJlZnJlc2hKV1QgYXMgciwgc2lnbkxvZ2luUGF5bG9hZCBhcyBzLCBUSElSRFdFQl9BVVRIX0RFRkFVTFRfVE9LRU5fRFVSQVRJT05fSU5fU0VDT05EUyBhcyB0LCB2ZXJpZnlMb2dpblBheWxvYWQgYXMgdiB9O1xuIl0sIm5hbWVzIjpbInoiLCJ2NCIsInV0aWxzIiwibGl0ZXJhbFNjaGVtYSIsInVuaW9uIiwic3RyaW5nIiwibnVtYmVyIiwiYm9vbGVhbiIsIm51bGwiLCJKc29uU2NoZW1hIiwibGF6eSIsImFycmF5IiwicmVjb3JkIiwiaW52YWxpZF90eXBlX2Vycm9yIiwiQWRkcmVzc1NjaGVtYSIsInJlZmluZSIsImFyZyIsImlzQWRkcmVzcyIsIm91dCIsIm1lc3NhZ2UiLCJSYXdEYXRlU2NoZW1hIiwiZGF0ZSIsInRyYW5zZm9ybSIsImkiLCJNYXRoIiwiZmxvb3IiLCJnZXRUaW1lIiwiQWNjb3VudFR5cGVTY2hlbWEiLCJsaXRlcmFsIiwiQXV0aGVudGljYXRpb25QYXlsb2FkRGF0YVNjaGVtYSIsIm9iamVjdCIsImlzcyIsInN1YiIsImF1ZCIsImV4cCIsIm5iZiIsImlhdCIsImp0aSIsImRlZmF1bHQiLCJjdHgiLCJvcHRpb25hbCIsIkF1dGhlbnRpY2F0aW9uUGF5bG9hZFNjaGVtYSIsInBheWxvYWQiLCJzaWduYXR1cmUiLCJBdXRoZW50aWNhdGVPcHRpb25zU2NoZW1hIiwiZG9tYWluIiwiaXNzdWVyQWRkcmVzcyIsInZhbGlkYXRlVG9rZW5JZCIsImZ1bmN0aW9uIiwiYXJncyIsIlZlcmlmeU9wdGlvbnNTY2hlbWEiLCJzdGF0ZW1lbnQiLCJ1cmkiLCJ2ZXJzaW9uIiwiY2hhaW5JZCIsInZhbGlkYXRlTm9uY2UiLCJyZXNvdXJjZXMiLCJUSElSRFdFQl9BVVRIX0NPT0tJRV9QUkVGSVgiLCJUSElSRFdFQl9BVVRIX1RPS0VOX0NPT0tJRV9QUkVGSVgiLCJUSElSRFdFQl9BVVRIX0FDVElWRV9BQ0NPVU5UX0NPT0tJRSIsIlRISVJEV0VCX0FVVEhfREVGQVVMVF9MT0dJTl9QQVlMT0FEX0RVUkFUSU9OX0lOX1NFQ09ORFMiLCJUSElSRFdFQl9BVVRIX0RFRkFVTFRfVE9LRU5fRFVSQVRJT05fSU5fU0VDT05EUyIsIlRISVJEV0VCX0FVVEhfREVGQVVMVF9SRUZSRVNIX0lOVEVSVkFMX0lOX1NFQ09ORFMiLCJHZW5lcmF0ZU9wdGlvbnNTY2hlbWEiLCJ0b2tlbklkIiwiZXhwaXJhdGlvblRpbWUiLCJEYXRlIiwibm93IiwiaW52YWxpZEJlZm9yZSIsInNlc3Npb24iLCJ2ZXJpZnlPcHRpb25zIiwib21pdCIsIlJlZnJlc2hPcHRpb25zU2NoZW1hIiwiTG9naW5PcHRpb25zU2NoZW1hIiwiYWRkcmVzcyIsIm5vbmNlIiwiTG9naW5QYXlsb2FkRGF0YVNjaGVtYSIsInR5cGUiLCJjaGFpbl9pZCIsImlzc3VlZF9hdCIsImQiLCJ0b0lTT1N0cmluZyIsImV4cGlyYXRpb25fdGltZSIsImludmFsaWRfYmVmb3JlIiwiTG9naW5QYXlsb2FkU2NoZW1hIiwiTG9naW5QYXlsb2FkT3V0cHV0U2NoZW1hIiwiZXh0ZW5kIiwiY3JlYXRlTG9naW5NZXNzYWdlIiwidHlwZUZpZWxkIiwiaGVhZGVyIiwicHJlZml4Iiwiam9pbiIsInN1ZmZpeEFycmF5IiwidXJpRmllbGQiLCJwdXNoIiwidmVyc2lvbkZpZWxkIiwiY2hhaW5GaWVsZCIsIm5vbmNlRmllbGQiLCJpc3N1ZWRBdEZpZWxkIiwiZXhwaXJ5RmllbGQiLCJpbnZhbGlkQmVmb3JlRmllbGQiLCJtYXAiLCJ4Iiwic3VmZml4IiwiYnVpbGRMb2dpblBheWxvYWQiLCJfcmVmIiwid2FsbGV0Iiwib3B0aW9ucyIsInBhcnNlZE9wdGlvbnMiLCJwYXJzZSIsImdldENoYWluSWQiLCJ0b1N0cmluZyIsImdldEFkZHJlc3MiLCJzaWduTG9naW5QYXlsb2FkIiwiX3JlZjIiLCJzaWduTWVzc2FnZSIsImJ1aWxkQW5kU2lnbkxvZ2luUGF5bG9hZCIsIl9yZWYzIiwidmVyaWZ5TG9naW5QYXlsb2FkIiwiX3JlZjQiLCJFcnJvciIsInVuZGVmaW5lZCIsImVyciIsImN1cnJlbnRUaW1lIiwibWlzc2luZ1Jlc291cmNlcyIsImZpbHRlciIsInJlc291cmNlIiwiaW5jbHVkZXMiLCJsZW5ndGgiLCJwYXJzZUludCIsInZlcmlmaWVkIiwidmVyaWZ5U2lnbmF0dXJlIiwidG9Mb3dlckNhc2UiLCJpc0Jyb3dzZXIiLCJiYXNlNjRlbmNvZGUiLCJkYXRhIiwid2luZG93IiwiYnRvYSIsIkJ1ZmZlciIsImZyb20iLCJyZXBsYWNlIiwiYmFzZTY0ZGVjb2RlIiwiYXRvYiIsImJ1aWxkSldUIiwicGF5bG9hZERhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwiYWxnIiwidHlwIiwiZW5jb2RlZEhlYWRlciIsImVuY29kZWREYXRhIiwiZW5jb2RlZFNpZ25hdHVyZSIsImp3dCIsImdlbmVyYXRlSldUIiwidXNlckFkZHJlc3MiLCJzZXNzaW9uVHJpZ2dlciIsImFkbWluQWRkcmVzcyIsInBhcnNlSldUIiwiZW5jb2RlZFBheWxvYWQiLCJzcGxpdCIsInJlZnJlc2hKV1QiLCJhdXRoZW50aWNhdGVKV1QiLCJUaGlyZHdlYkF1dGgiLCJjb25zdHJ1Y3RvciIsInVwZGF0ZVdhbGxldCIsImZvcm1hdE9wdGlvbnMiLCJsb2dpbldpdGhQYXlsb2FkIiwibG9naW4iLCJ2ZXJpZnkiLCJnZW5lcmF0ZSIsInJlZnJlc2giLCJhdXRoZW50aWNhdGUiLCJwYXJzZVRva2VuIiwiQSIsIkciLCJKIiwiTCIsIlIiLCJUIiwiViIsImEiLCJiIiwiYyIsImUiLCJmIiwiZyIsImgiLCJqIiwiayIsImwiLCJtIiwibiIsIm8iLCJwIiwicSIsInIiLCJzIiwidCIsInYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@thirdweb-dev+auth@4.1.24_@ethersproject+abstract-provider@5.7.0_@ethersproject+abstract-sign_ho6wio3g7xy5fyf6q6ypqhnuki/node_modules/@thirdweb-dev/auth/dist/auth-3e6bcaed.esm.js\n");

/***/ })

};
;