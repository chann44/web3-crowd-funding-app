"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@ethersproject+transactions@5.7.0";
exports.ids = ["vendor-chunks/@ethersproject+transactions@5.7.0"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@ethersproject+transactions@5.7.0/node_modules/@ethersproject/transactions/lib.esm/_version.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@ethersproject+transactions@5.7.0/node_modules/@ethersproject/transactions/lib.esm/_version.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\nconst version = \"transactions/5.7.0\"; //# sourceMappingURL=_version.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGV0aGVyc3Byb2plY3QrdHJhbnNhY3Rpb25zQDUuNy4wL25vZGVfbW9kdWxlcy9AZXRoZXJzcHJvamVjdC90cmFuc2FjdGlvbnMvbGliLmVzbS9fdmVyc2lvbi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sTUFBTUEsVUFBVSxxQkFBcUIsQ0FDNUMsb0NBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2xpZW50Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BldGhlcnNwcm9qZWN0K3RyYW5zYWN0aW9uc0A1LjcuMC9ub2RlX21vZHVsZXMvQGV0aGVyc3Byb2plY3QvdHJhbnNhY3Rpb25zL2xpYi5lc20vX3ZlcnNpb24uanM/NmY1MiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgdmVyc2lvbiA9IFwidHJhbnNhY3Rpb25zLzUuNy4wXCI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1fdmVyc2lvbi5qcy5tYXAiXSwibmFtZXMiOlsidmVyc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@ethersproject+transactions@5.7.0/node_modules/@ethersproject/transactions/lib.esm/_version.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@ethersproject+transactions@5.7.0/node_modules/@ethersproject/transactions/lib.esm/index.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@ethersproject+transactions@5.7.0/node_modules/@ethersproject/transactions/lib.esm/index.js ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TransactionTypes: () => (/* binding */ TransactionTypes),\n/* harmony export */   accessListify: () => (/* binding */ accessListify),\n/* harmony export */   computeAddress: () => (/* binding */ computeAddress),\n/* harmony export */   parse: () => (/* binding */ parse),\n/* harmony export */   recoverAddress: () => (/* binding */ recoverAddress),\n/* harmony export */   serialize: () => (/* binding */ serialize)\n/* harmony export */ });\n/* harmony import */ var _ethersproject_address__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ethersproject/address */ \"(ssr)/./node_modules/.pnpm/@ethersproject+address@5.7.0/node_modules/@ethersproject/address/lib.esm/index.js\");\n/* harmony import */ var _ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ethersproject/bignumber */ \"(ssr)/./node_modules/.pnpm/@ethersproject+bignumber@5.7.0/node_modules/@ethersproject/bignumber/lib.esm/bignumber.js\");\n/* harmony import */ var _ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ethersproject/bytes */ \"(ssr)/./node_modules/.pnpm/@ethersproject+bytes@5.7.0/node_modules/@ethersproject/bytes/lib.esm/index.js\");\n/* harmony import */ var _ethersproject_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ethersproject/constants */ \"(ssr)/./node_modules/.pnpm/@ethersproject+constants@5.7.0/node_modules/@ethersproject/constants/lib.esm/bignumbers.js\");\n/* harmony import */ var _ethersproject_keccak256__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ethersproject/keccak256 */ \"(ssr)/./node_modules/.pnpm/@ethersproject+keccak256@5.7.0/node_modules/@ethersproject/keccak256/lib.esm/index.js\");\n/* harmony import */ var _ethersproject_properties__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ethersproject/properties */ \"(ssr)/./node_modules/.pnpm/@ethersproject+properties@5.7.0/node_modules/@ethersproject/properties/lib.esm/index.js\");\n/* harmony import */ var _ethersproject_rlp__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ethersproject/rlp */ \"(ssr)/./node_modules/.pnpm/@ethersproject+rlp@5.7.0/node_modules/@ethersproject/rlp/lib.esm/index.js\");\n/* harmony import */ var _ethersproject_signing_key__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ethersproject/signing-key */ \"(ssr)/./node_modules/.pnpm/@ethersproject+signing-key@5.7.0/node_modules/@ethersproject/signing-key/lib.esm/index.js\");\n/* harmony import */ var _ethersproject_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ethersproject/logger */ \"(ssr)/./node_modules/.pnpm/@ethersproject+logger@5.7.0/node_modules/@ethersproject/logger/lib.esm/index.js\");\n/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_version */ \"(ssr)/./node_modules/.pnpm/@ethersproject+transactions@5.7.0/node_modules/@ethersproject/transactions/lib.esm/_version.js\");\n\n\n\n\n\n\n\n\n\n\n\nconst logger = new _ethersproject_logger__WEBPACK_IMPORTED_MODULE_0__.Logger(_version__WEBPACK_IMPORTED_MODULE_1__.version);\nvar TransactionTypes;\n(function(TransactionTypes) {\n    TransactionTypes[TransactionTypes[\"legacy\"] = 0] = \"legacy\";\n    TransactionTypes[TransactionTypes[\"eip2930\"] = 1] = \"eip2930\";\n    TransactionTypes[TransactionTypes[\"eip1559\"] = 2] = \"eip1559\";\n})(TransactionTypes || (TransactionTypes = {}));\n;\n///////////////////////////////\nfunction handleAddress(value) {\n    if (value === \"0x\") {\n        return null;\n    }\n    return (0,_ethersproject_address__WEBPACK_IMPORTED_MODULE_2__.getAddress)(value);\n}\nfunction handleNumber(value) {\n    if (value === \"0x\") {\n        return _ethersproject_constants__WEBPACK_IMPORTED_MODULE_3__.Zero;\n    }\n    return _ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_4__.BigNumber.from(value);\n}\n// Legacy Transaction Fields\nconst transactionFields = [\n    {\n        name: \"nonce\",\n        maxLength: 32,\n        numeric: true\n    },\n    {\n        name: \"gasPrice\",\n        maxLength: 32,\n        numeric: true\n    },\n    {\n        name: \"gasLimit\",\n        maxLength: 32,\n        numeric: true\n    },\n    {\n        name: \"to\",\n        length: 20\n    },\n    {\n        name: \"value\",\n        maxLength: 32,\n        numeric: true\n    },\n    {\n        name: \"data\"\n    }\n];\nconst allowedTransactionKeys = {\n    chainId: true,\n    data: true,\n    gasLimit: true,\n    gasPrice: true,\n    nonce: true,\n    to: true,\n    type: true,\n    value: true\n};\nfunction computeAddress(key) {\n    const publicKey = (0,_ethersproject_signing_key__WEBPACK_IMPORTED_MODULE_5__.computePublicKey)(key);\n    return (0,_ethersproject_address__WEBPACK_IMPORTED_MODULE_2__.getAddress)((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexDataSlice)((0,_ethersproject_keccak256__WEBPACK_IMPORTED_MODULE_7__.keccak256)((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexDataSlice)(publicKey, 1)), 12));\n}\nfunction recoverAddress(digest, signature) {\n    return computeAddress((0,_ethersproject_signing_key__WEBPACK_IMPORTED_MODULE_5__.recoverPublicKey)((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.arrayify)(digest), signature));\n}\nfunction formatNumber(value, name) {\n    const result = (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.stripZeros)(_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_4__.BigNumber.from(value).toHexString());\n    if (result.length > 32) {\n        logger.throwArgumentError(\"invalid length for \" + name, \"transaction:\" + name, value);\n    }\n    return result;\n}\nfunction accessSetify(addr, storageKeys) {\n    return {\n        address: (0,_ethersproject_address__WEBPACK_IMPORTED_MODULE_2__.getAddress)(addr),\n        storageKeys: (storageKeys || []).map((storageKey, index)=>{\n            if ((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexDataLength)(storageKey) !== 32) {\n                logger.throwArgumentError(\"invalid access list storageKey\", `accessList[${addr}:${index}]`, storageKey);\n            }\n            return storageKey.toLowerCase();\n        })\n    };\n}\nfunction accessListify(value) {\n    if (Array.isArray(value)) {\n        return value.map((set, index)=>{\n            if (Array.isArray(set)) {\n                if (set.length > 2) {\n                    logger.throwArgumentError(\"access list expected to be [ address, storageKeys[] ]\", `value[${index}]`, set);\n                }\n                return accessSetify(set[0], set[1]);\n            }\n            return accessSetify(set.address, set.storageKeys);\n        });\n    }\n    const result = Object.keys(value).map((addr)=>{\n        const storageKeys = value[addr].reduce((accum, storageKey)=>{\n            accum[storageKey] = true;\n            return accum;\n        }, {});\n        return accessSetify(addr, Object.keys(storageKeys).sort());\n    });\n    result.sort((a, b)=>a.address.localeCompare(b.address));\n    return result;\n}\nfunction formatAccessList(value) {\n    return accessListify(value).map((set)=>[\n            set.address,\n            set.storageKeys\n        ]);\n}\nfunction _serializeEip1559(transaction, signature) {\n    // If there is an explicit gasPrice, make sure it matches the\n    // EIP-1559 fees; otherwise they may not understand what they\n    // think they are setting in terms of fee.\n    if (transaction.gasPrice != null) {\n        const gasPrice = _ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_4__.BigNumber.from(transaction.gasPrice);\n        const maxFeePerGas = _ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_4__.BigNumber.from(transaction.maxFeePerGas || 0);\n        if (!gasPrice.eq(maxFeePerGas)) {\n            logger.throwArgumentError(\"mismatch EIP-1559 gasPrice != maxFeePerGas\", \"tx\", {\n                gasPrice,\n                maxFeePerGas\n            });\n        }\n    }\n    const fields = [\n        formatNumber(transaction.chainId || 0, \"chainId\"),\n        formatNumber(transaction.nonce || 0, \"nonce\"),\n        formatNumber(transaction.maxPriorityFeePerGas || 0, \"maxPriorityFeePerGas\"),\n        formatNumber(transaction.maxFeePerGas || 0, \"maxFeePerGas\"),\n        formatNumber(transaction.gasLimit || 0, \"gasLimit\"),\n        transaction.to != null ? (0,_ethersproject_address__WEBPACK_IMPORTED_MODULE_2__.getAddress)(transaction.to) : \"0x\",\n        formatNumber(transaction.value || 0, \"value\"),\n        transaction.data || \"0x\",\n        formatAccessList(transaction.accessList || [])\n    ];\n    if (signature) {\n        const sig = (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.splitSignature)(signature);\n        fields.push(formatNumber(sig.recoveryParam, \"recoveryParam\"));\n        fields.push((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.stripZeros)(sig.r));\n        fields.push((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.stripZeros)(sig.s));\n    }\n    return (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexConcat)([\n        \"0x02\",\n        _ethersproject_rlp__WEBPACK_IMPORTED_MODULE_8__.encode(fields)\n    ]);\n}\nfunction _serializeEip2930(transaction, signature) {\n    const fields = [\n        formatNumber(transaction.chainId || 0, \"chainId\"),\n        formatNumber(transaction.nonce || 0, \"nonce\"),\n        formatNumber(transaction.gasPrice || 0, \"gasPrice\"),\n        formatNumber(transaction.gasLimit || 0, \"gasLimit\"),\n        transaction.to != null ? (0,_ethersproject_address__WEBPACK_IMPORTED_MODULE_2__.getAddress)(transaction.to) : \"0x\",\n        formatNumber(transaction.value || 0, \"value\"),\n        transaction.data || \"0x\",\n        formatAccessList(transaction.accessList || [])\n    ];\n    if (signature) {\n        const sig = (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.splitSignature)(signature);\n        fields.push(formatNumber(sig.recoveryParam, \"recoveryParam\"));\n        fields.push((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.stripZeros)(sig.r));\n        fields.push((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.stripZeros)(sig.s));\n    }\n    return (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexConcat)([\n        \"0x01\",\n        _ethersproject_rlp__WEBPACK_IMPORTED_MODULE_8__.encode(fields)\n    ]);\n}\n// Legacy Transactions and EIP-155\nfunction _serialize(transaction, signature) {\n    (0,_ethersproject_properties__WEBPACK_IMPORTED_MODULE_9__.checkProperties)(transaction, allowedTransactionKeys);\n    const raw = [];\n    transactionFields.forEach(function(fieldInfo) {\n        let value = transaction[fieldInfo.name] || [];\n        const options = {};\n        if (fieldInfo.numeric) {\n            options.hexPad = \"left\";\n        }\n        value = (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.arrayify)((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexlify)(value, options));\n        // Fixed-width field\n        if (fieldInfo.length && value.length !== fieldInfo.length && value.length > 0) {\n            logger.throwArgumentError(\"invalid length for \" + fieldInfo.name, \"transaction:\" + fieldInfo.name, value);\n        }\n        // Variable-width (with a maximum)\n        if (fieldInfo.maxLength) {\n            value = (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.stripZeros)(value);\n            if (value.length > fieldInfo.maxLength) {\n                logger.throwArgumentError(\"invalid length for \" + fieldInfo.name, \"transaction:\" + fieldInfo.name, value);\n            }\n        }\n        raw.push((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexlify)(value));\n    });\n    let chainId = 0;\n    if (transaction.chainId != null) {\n        // A chainId was provided; if non-zero we'll use EIP-155\n        chainId = transaction.chainId;\n        if (typeof chainId !== \"number\") {\n            logger.throwArgumentError(\"invalid transaction.chainId\", \"transaction\", transaction);\n        }\n    } else if (signature && !(0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.isBytesLike)(signature) && signature.v > 28) {\n        // No chainId provided, but the signature is signing with EIP-155; derive chainId\n        chainId = Math.floor((signature.v - 35) / 2);\n    }\n    // We have an EIP-155 transaction (chainId was specified and non-zero)\n    if (chainId !== 0) {\n        raw.push((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexlify)(chainId)); // @TODO: hexValue?\n        raw.push(\"0x\");\n        raw.push(\"0x\");\n    }\n    // Requesting an unsigned transaction\n    if (!signature) {\n        return _ethersproject_rlp__WEBPACK_IMPORTED_MODULE_8__.encode(raw);\n    }\n    // The splitSignature will ensure the transaction has a recoveryParam in the\n    // case that the signTransaction function only adds a v.\n    const sig = (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.splitSignature)(signature);\n    // We pushed a chainId and null r, s on for hashing only; remove those\n    let v = 27 + sig.recoveryParam;\n    if (chainId !== 0) {\n        raw.pop();\n        raw.pop();\n        raw.pop();\n        v += chainId * 2 + 8;\n        // If an EIP-155 v (directly or indirectly; maybe _vs) was provided, check it!\n        if (sig.v > 28 && sig.v !== v) {\n            logger.throwArgumentError(\"transaction.chainId/signature.v mismatch\", \"signature\", signature);\n        }\n    } else if (sig.v !== v) {\n        logger.throwArgumentError(\"transaction.chainId/signature.v mismatch\", \"signature\", signature);\n    }\n    raw.push((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexlify)(v));\n    raw.push((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.stripZeros)((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.arrayify)(sig.r)));\n    raw.push((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.stripZeros)((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.arrayify)(sig.s)));\n    return _ethersproject_rlp__WEBPACK_IMPORTED_MODULE_8__.encode(raw);\n}\nfunction serialize(transaction, signature) {\n    // Legacy and EIP-155 Transactions\n    if (transaction.type == null || transaction.type === 0) {\n        if (transaction.accessList != null) {\n            logger.throwArgumentError(\"untyped transactions do not support accessList; include type: 1\", \"transaction\", transaction);\n        }\n        return _serialize(transaction, signature);\n    }\n    // Typed Transactions (EIP-2718)\n    switch(transaction.type){\n        case 1:\n            return _serializeEip2930(transaction, signature);\n        case 2:\n            return _serializeEip1559(transaction, signature);\n        default:\n            break;\n    }\n    return logger.throwError(`unsupported transaction type: ${transaction.type}`, _ethersproject_logger__WEBPACK_IMPORTED_MODULE_0__.Logger.errors.UNSUPPORTED_OPERATION, {\n        operation: \"serializeTransaction\",\n        transactionType: transaction.type\n    });\n}\nfunction _parseEipSignature(tx, fields, serialize) {\n    try {\n        const recid = handleNumber(fields[0]).toNumber();\n        if (recid !== 0 && recid !== 1) {\n            throw new Error(\"bad recid\");\n        }\n        tx.v = recid;\n    } catch (error) {\n        logger.throwArgumentError(\"invalid v for transaction type: 1\", \"v\", fields[0]);\n    }\n    tx.r = (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexZeroPad)(fields[1], 32);\n    tx.s = (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexZeroPad)(fields[2], 32);\n    try {\n        const digest = (0,_ethersproject_keccak256__WEBPACK_IMPORTED_MODULE_7__.keccak256)(serialize(tx));\n        tx.from = recoverAddress(digest, {\n            r: tx.r,\n            s: tx.s,\n            recoveryParam: tx.v\n        });\n    } catch (error) {}\n}\nfunction _parseEip1559(payload) {\n    const transaction = _ethersproject_rlp__WEBPACK_IMPORTED_MODULE_8__.decode(payload.slice(1));\n    if (transaction.length !== 9 && transaction.length !== 12) {\n        logger.throwArgumentError(\"invalid component count for transaction type: 2\", \"payload\", (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexlify)(payload));\n    }\n    const maxPriorityFeePerGas = handleNumber(transaction[2]);\n    const maxFeePerGas = handleNumber(transaction[3]);\n    const tx = {\n        type: 2,\n        chainId: handleNumber(transaction[0]).toNumber(),\n        nonce: handleNumber(transaction[1]).toNumber(),\n        maxPriorityFeePerGas: maxPriorityFeePerGas,\n        maxFeePerGas: maxFeePerGas,\n        gasPrice: null,\n        gasLimit: handleNumber(transaction[4]),\n        to: handleAddress(transaction[5]),\n        value: handleNumber(transaction[6]),\n        data: transaction[7],\n        accessList: accessListify(transaction[8])\n    };\n    // Unsigned EIP-1559 Transaction\n    if (transaction.length === 9) {\n        return tx;\n    }\n    tx.hash = (0,_ethersproject_keccak256__WEBPACK_IMPORTED_MODULE_7__.keccak256)(payload);\n    _parseEipSignature(tx, transaction.slice(9), _serializeEip1559);\n    return tx;\n}\nfunction _parseEip2930(payload) {\n    const transaction = _ethersproject_rlp__WEBPACK_IMPORTED_MODULE_8__.decode(payload.slice(1));\n    if (transaction.length !== 8 && transaction.length !== 11) {\n        logger.throwArgumentError(\"invalid component count for transaction type: 1\", \"payload\", (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexlify)(payload));\n    }\n    const tx = {\n        type: 1,\n        chainId: handleNumber(transaction[0]).toNumber(),\n        nonce: handleNumber(transaction[1]).toNumber(),\n        gasPrice: handleNumber(transaction[2]),\n        gasLimit: handleNumber(transaction[3]),\n        to: handleAddress(transaction[4]),\n        value: handleNumber(transaction[5]),\n        data: transaction[6],\n        accessList: accessListify(transaction[7])\n    };\n    // Unsigned EIP-2930 Transaction\n    if (transaction.length === 8) {\n        return tx;\n    }\n    tx.hash = (0,_ethersproject_keccak256__WEBPACK_IMPORTED_MODULE_7__.keccak256)(payload);\n    _parseEipSignature(tx, transaction.slice(8), _serializeEip2930);\n    return tx;\n}\n// Legacy Transactions and EIP-155\nfunction _parse(rawTransaction) {\n    const transaction = _ethersproject_rlp__WEBPACK_IMPORTED_MODULE_8__.decode(rawTransaction);\n    if (transaction.length !== 9 && transaction.length !== 6) {\n        logger.throwArgumentError(\"invalid raw transaction\", \"rawTransaction\", rawTransaction);\n    }\n    const tx = {\n        nonce: handleNumber(transaction[0]).toNumber(),\n        gasPrice: handleNumber(transaction[1]),\n        gasLimit: handleNumber(transaction[2]),\n        to: handleAddress(transaction[3]),\n        value: handleNumber(transaction[4]),\n        data: transaction[5],\n        chainId: 0\n    };\n    // Legacy unsigned transaction\n    if (transaction.length === 6) {\n        return tx;\n    }\n    try {\n        tx.v = _ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_4__.BigNumber.from(transaction[6]).toNumber();\n    } catch (error) {\n        // @TODO: What makes snese to do? The v is too big\n        return tx;\n    }\n    tx.r = (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexZeroPad)(transaction[7], 32);\n    tx.s = (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexZeroPad)(transaction[8], 32);\n    if (_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_4__.BigNumber.from(tx.r).isZero() && _ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_4__.BigNumber.from(tx.s).isZero()) {\n        // EIP-155 unsigned transaction\n        tx.chainId = tx.v;\n        tx.v = 0;\n    } else {\n        // Signed Transaction\n        tx.chainId = Math.floor((tx.v - 35) / 2);\n        if (tx.chainId < 0) {\n            tx.chainId = 0;\n        }\n        let recoveryParam = tx.v - 27;\n        const raw = transaction.slice(0, 6);\n        if (tx.chainId !== 0) {\n            raw.push((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexlify)(tx.chainId));\n            raw.push(\"0x\");\n            raw.push(\"0x\");\n            recoveryParam -= tx.chainId * 2 + 8;\n        }\n        const digest = (0,_ethersproject_keccak256__WEBPACK_IMPORTED_MODULE_7__.keccak256)(_ethersproject_rlp__WEBPACK_IMPORTED_MODULE_8__.encode(raw));\n        try {\n            tx.from = recoverAddress(digest, {\n                r: (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexlify)(tx.r),\n                s: (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.hexlify)(tx.s),\n                recoveryParam: recoveryParam\n            });\n        } catch (error) {}\n        tx.hash = (0,_ethersproject_keccak256__WEBPACK_IMPORTED_MODULE_7__.keccak256)(rawTransaction);\n    }\n    tx.type = null;\n    return tx;\n}\nfunction parse(rawTransaction) {\n    const payload = (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_6__.arrayify)(rawTransaction);\n    // Legacy and EIP-155 Transactions\n    if (payload[0] > 0x7f) {\n        return _parse(payload);\n    }\n    // Typed Transaction (EIP-2718)\n    switch(payload[0]){\n        case 1:\n            return _parseEip2930(payload);\n        case 2:\n            return _parseEip1559(payload);\n        default:\n            break;\n    }\n    return logger.throwError(`unsupported transaction type: ${payload[0]}`, _ethersproject_logger__WEBPACK_IMPORTED_MODULE_0__.Logger.errors.UNSUPPORTED_OPERATION, {\n        operation: \"parseTransaction\",\n        transactionType: payload[0]\n    });\n} //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGV0aGVyc3Byb2plY3QrdHJhbnNhY3Rpb25zQDUuNy4wL25vZGVfbW9kdWxlcy9AZXRoZXJzcHJvamVjdC90cmFuc2FjdGlvbnMvbGliLmVzbS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWE7QUFDdUM7QUFDQztBQUNrRztBQUN2RztBQUNLO0FBQ087QUFDbEI7QUFDc0M7QUFDakM7QUFDVjtBQUNyQyxNQUFNbUIsU0FBUyxJQUFJRix5REFBTUEsQ0FBQ0MsNkNBQU9BO0FBQzFCLElBQUlFLGlCQUFpQjtBQUMzQixVQUFVQSxnQkFBZ0I7SUFDdkJBLGdCQUFnQixDQUFDQSxnQkFBZ0IsQ0FBQyxTQUFTLEdBQUcsRUFBRSxHQUFHO0lBQ25EQSxnQkFBZ0IsQ0FBQ0EsZ0JBQWdCLENBQUMsVUFBVSxHQUFHLEVBQUUsR0FBRztJQUNwREEsZ0JBQWdCLENBQUNBLGdCQUFnQixDQUFDLFVBQVUsR0FBRyxFQUFFLEdBQUc7QUFDeEQsR0FBR0Esb0JBQXFCQSxDQUFBQSxtQkFBbUIsQ0FBQzs7QUFFNUMsK0JBQStCO0FBQy9CLFNBQVNDLGNBQWNDLEtBQUs7SUFDeEIsSUFBSUEsVUFBVSxNQUFNO1FBQ2hCLE9BQU87SUFDWDtJQUNBLE9BQU90QixrRUFBVUEsQ0FBQ3NCO0FBQ3RCO0FBQ0EsU0FBU0MsYUFBYUQsS0FBSztJQUN2QixJQUFJQSxVQUFVLE1BQU07UUFDaEIsT0FBT1gsMERBQUlBO0lBQ2Y7SUFDQSxPQUFPViwrREFBU0EsQ0FBQ3VCLElBQUksQ0FBQ0Y7QUFDMUI7QUFDQSw0QkFBNEI7QUFDNUIsTUFBTUcsb0JBQW9CO0lBQ3RCO1FBQUVDLE1BQU07UUFBU0MsV0FBVztRQUFJQyxTQUFTO0lBQUs7SUFDOUM7UUFBRUYsTUFBTTtRQUFZQyxXQUFXO1FBQUlDLFNBQVM7SUFBSztJQUNqRDtRQUFFRixNQUFNO1FBQVlDLFdBQVc7UUFBSUMsU0FBUztJQUFLO0lBQ2pEO1FBQUVGLE1BQU07UUFBTUcsUUFBUTtJQUFHO0lBQ3pCO1FBQUVILE1BQU07UUFBU0MsV0FBVztRQUFJQyxTQUFTO0lBQUs7SUFDOUM7UUFBRUYsTUFBTTtJQUFPO0NBQ2xCO0FBQ0QsTUFBTUkseUJBQXlCO0lBQzNCQyxTQUFTO0lBQU1DLE1BQU07SUFBTUMsVUFBVTtJQUFNQyxVQUFVO0lBQU1DLE9BQU87SUFBTUMsSUFBSTtJQUFNQyxNQUFNO0lBQU1mLE9BQU87QUFDekc7QUFDTyxTQUFTZ0IsZUFBZUMsR0FBRztJQUM5QixNQUFNQyxZQUFZekIsNEVBQWdCQSxDQUFDd0I7SUFDbkMsT0FBT3ZDLGtFQUFVQSxDQUFDSyxrRUFBWUEsQ0FBQ08sbUVBQVNBLENBQUNQLGtFQUFZQSxDQUFDbUMsV0FBVyxLQUFLO0FBQzFFO0FBQ08sU0FBU0MsZUFBZUMsTUFBTSxFQUFFQyxTQUFTO0lBQzVDLE9BQU9MLGVBQWV0Qiw0RUFBZ0JBLENBQUNkLDhEQUFRQSxDQUFDd0MsU0FBU0M7QUFDN0Q7QUFDQSxTQUFTQyxhQUFhdEIsS0FBSyxFQUFFSSxJQUFJO0lBQzdCLE1BQU1tQixTQUFTbkMsZ0VBQVVBLENBQUNULCtEQUFTQSxDQUFDdUIsSUFBSSxDQUFDRixPQUFPd0IsV0FBVztJQUMzRCxJQUFJRCxPQUFPaEIsTUFBTSxHQUFHLElBQUk7UUFDcEJWLE9BQU80QixrQkFBa0IsQ0FBQyx3QkFBd0JyQixNQUFPLGlCQUFpQkEsTUFBT0o7SUFDckY7SUFDQSxPQUFPdUI7QUFDWDtBQUNBLFNBQVNHLGFBQWFDLElBQUksRUFBRUMsV0FBVztJQUNuQyxPQUFPO1FBQ0hDLFNBQVNuRCxrRUFBVUEsQ0FBQ2lEO1FBQ3BCQyxhQUFhLENBQUNBLGVBQWUsRUFBRSxFQUFFRSxHQUFHLENBQUMsQ0FBQ0MsWUFBWUM7WUFDOUMsSUFBSWxELG1FQUFhQSxDQUFDaUQsZ0JBQWdCLElBQUk7Z0JBQ2xDbEMsT0FBTzRCLGtCQUFrQixDQUFDLGtDQUFrQyxDQUFDLFdBQVcsRUFBRUUsS0FBSyxDQUFDLEVBQUVLLE1BQU0sQ0FBQyxDQUFDLEVBQUVEO1lBQ2hHO1lBQ0EsT0FBT0EsV0FBV0UsV0FBVztRQUNqQztJQUNKO0FBQ0o7QUFDTyxTQUFTQyxjQUFjbEMsS0FBSztJQUMvQixJQUFJbUMsTUFBTUMsT0FBTyxDQUFDcEMsUUFBUTtRQUN0QixPQUFPQSxNQUFNOEIsR0FBRyxDQUFDLENBQUNPLEtBQUtMO1lBQ25CLElBQUlHLE1BQU1DLE9BQU8sQ0FBQ0MsTUFBTTtnQkFDcEIsSUFBSUEsSUFBSTlCLE1BQU0sR0FBRyxHQUFHO29CQUNoQlYsT0FBTzRCLGtCQUFrQixDQUFDLHlEQUF5RCxDQUFDLE1BQU0sRUFBRU8sTUFBTSxDQUFDLENBQUMsRUFBRUs7Z0JBQzFHO2dCQUNBLE9BQU9YLGFBQWFXLEdBQUcsQ0FBQyxFQUFFLEVBQUVBLEdBQUcsQ0FBQyxFQUFFO1lBQ3RDO1lBQ0EsT0FBT1gsYUFBYVcsSUFBSVIsT0FBTyxFQUFFUSxJQUFJVCxXQUFXO1FBQ3BEO0lBQ0o7SUFDQSxNQUFNTCxTQUFTZSxPQUFPQyxJQUFJLENBQUN2QyxPQUFPOEIsR0FBRyxDQUFDLENBQUNIO1FBQ25DLE1BQU1DLGNBQWM1QixLQUFLLENBQUMyQixLQUFLLENBQUNhLE1BQU0sQ0FBQyxDQUFDQyxPQUFPVjtZQUMzQ1UsS0FBSyxDQUFDVixXQUFXLEdBQUc7WUFDcEIsT0FBT1U7UUFDWCxHQUFHLENBQUM7UUFDSixPQUFPZixhQUFhQyxNQUFNVyxPQUFPQyxJQUFJLENBQUNYLGFBQWFjLElBQUk7SUFDM0Q7SUFDQW5CLE9BQU9tQixJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBT0QsRUFBRWQsT0FBTyxDQUFDZ0IsYUFBYSxDQUFDRCxFQUFFZixPQUFPO0lBQ3hELE9BQU9OO0FBQ1g7QUFDQSxTQUFTdUIsaUJBQWlCOUMsS0FBSztJQUMzQixPQUFPa0MsY0FBY2xDLE9BQU84QixHQUFHLENBQUMsQ0FBQ08sTUFBUTtZQUFDQSxJQUFJUixPQUFPO1lBQUVRLElBQUlULFdBQVc7U0FBQztBQUMzRTtBQUNBLFNBQVNtQixrQkFBa0JDLFdBQVcsRUFBRTNCLFNBQVM7SUFDN0MsNkRBQTZEO0lBQzdELDZEQUE2RDtJQUM3RCwwQ0FBMEM7SUFDMUMsSUFBSTJCLFlBQVlwQyxRQUFRLElBQUksTUFBTTtRQUM5QixNQUFNQSxXQUFXakMsK0RBQVNBLENBQUN1QixJQUFJLENBQUM4QyxZQUFZcEMsUUFBUTtRQUNwRCxNQUFNcUMsZUFBZXRFLCtEQUFTQSxDQUFDdUIsSUFBSSxDQUFDOEMsWUFBWUMsWUFBWSxJQUFJO1FBQ2hFLElBQUksQ0FBQ3JDLFNBQVNzQyxFQUFFLENBQUNELGVBQWU7WUFDNUJwRCxPQUFPNEIsa0JBQWtCLENBQUMsOENBQThDLE1BQU07Z0JBQzFFYjtnQkFBVXFDO1lBQ2Q7UUFDSjtJQUNKO0lBQ0EsTUFBTUUsU0FBUztRQUNYN0IsYUFBYTBCLFlBQVl2QyxPQUFPLElBQUksR0FBRztRQUN2Q2EsYUFBYTBCLFlBQVluQyxLQUFLLElBQUksR0FBRztRQUNyQ1MsYUFBYTBCLFlBQVlJLG9CQUFvQixJQUFJLEdBQUc7UUFDcEQ5QixhQUFhMEIsWUFBWUMsWUFBWSxJQUFJLEdBQUc7UUFDNUMzQixhQUFhMEIsWUFBWXJDLFFBQVEsSUFBSSxHQUFHO1FBQ3RDcUMsWUFBWWxDLEVBQUUsSUFBSSxPQUFRcEMsa0VBQVVBLENBQUNzRSxZQUFZbEMsRUFBRSxJQUFJO1FBQ3pEUSxhQUFhMEIsWUFBWWhELEtBQUssSUFBSSxHQUFHO1FBQ3BDZ0QsWUFBWXRDLElBQUksSUFBSTtRQUNwQm9DLGlCQUFpQkUsWUFBWUssVUFBVSxJQUFJLEVBQUU7S0FDakQ7SUFDRCxJQUFJaEMsV0FBVztRQUNYLE1BQU1pQyxNQUFNbkUsb0VBQWNBLENBQUNrQztRQUMzQjhCLE9BQU9JLElBQUksQ0FBQ2pDLGFBQWFnQyxJQUFJRSxhQUFhLEVBQUU7UUFDNUNMLE9BQU9JLElBQUksQ0FBQ25FLGdFQUFVQSxDQUFDa0UsSUFBSUcsQ0FBQztRQUM1Qk4sT0FBT0ksSUFBSSxDQUFDbkUsZ0VBQVVBLENBQUNrRSxJQUFJSSxDQUFDO0lBQ2hDO0lBQ0EsT0FBTzdFLCtEQUFTQSxDQUFDO1FBQUM7UUFBUVcsc0RBQVUsQ0FBQzJEO0tBQVE7QUFDakQ7QUFDQSxTQUFTUyxrQkFBa0JaLFdBQVcsRUFBRTNCLFNBQVM7SUFDN0MsTUFBTThCLFNBQVM7UUFDWDdCLGFBQWEwQixZQUFZdkMsT0FBTyxJQUFJLEdBQUc7UUFDdkNhLGFBQWEwQixZQUFZbkMsS0FBSyxJQUFJLEdBQUc7UUFDckNTLGFBQWEwQixZQUFZcEMsUUFBUSxJQUFJLEdBQUc7UUFDeENVLGFBQWEwQixZQUFZckMsUUFBUSxJQUFJLEdBQUc7UUFDdENxQyxZQUFZbEMsRUFBRSxJQUFJLE9BQVFwQyxrRUFBVUEsQ0FBQ3NFLFlBQVlsQyxFQUFFLElBQUk7UUFDekRRLGFBQWEwQixZQUFZaEQsS0FBSyxJQUFJLEdBQUc7UUFDcENnRCxZQUFZdEMsSUFBSSxJQUFJO1FBQ3BCb0MsaUJBQWlCRSxZQUFZSyxVQUFVLElBQUksRUFBRTtLQUNqRDtJQUNELElBQUloQyxXQUFXO1FBQ1gsTUFBTWlDLE1BQU1uRSxvRUFBY0EsQ0FBQ2tDO1FBQzNCOEIsT0FBT0ksSUFBSSxDQUFDakMsYUFBYWdDLElBQUlFLGFBQWEsRUFBRTtRQUM1Q0wsT0FBT0ksSUFBSSxDQUFDbkUsZ0VBQVVBLENBQUNrRSxJQUFJRyxDQUFDO1FBQzVCTixPQUFPSSxJQUFJLENBQUNuRSxnRUFBVUEsQ0FBQ2tFLElBQUlJLENBQUM7SUFDaEM7SUFDQSxPQUFPN0UsK0RBQVNBLENBQUM7UUFBQztRQUFRVyxzREFBVSxDQUFDMkQ7S0FBUTtBQUNqRDtBQUNBLGtDQUFrQztBQUNsQyxTQUFTVSxXQUFXYixXQUFXLEVBQUUzQixTQUFTO0lBQ3RDOUIsMEVBQWVBLENBQUN5RCxhQUFheEM7SUFDN0IsTUFBTXNELE1BQU0sRUFBRTtJQUNkM0Qsa0JBQWtCNEQsT0FBTyxDQUFDLFNBQVVDLFNBQVM7UUFDekMsSUFBSWhFLFFBQVFnRCxXQUFXLENBQUNnQixVQUFVNUQsSUFBSSxDQUFDLElBQUssRUFBRTtRQUM5QyxNQUFNNkQsVUFBVSxDQUFDO1FBQ2pCLElBQUlELFVBQVUxRCxPQUFPLEVBQUU7WUFDbkIyRCxRQUFRQyxNQUFNLEdBQUc7UUFDckI7UUFDQWxFLFFBQVFwQiw4REFBUUEsQ0FBQ0ksNkRBQU9BLENBQUNnQixPQUFPaUU7UUFDaEMsb0JBQW9CO1FBQ3BCLElBQUlELFVBQVV6RCxNQUFNLElBQUlQLE1BQU1PLE1BQU0sS0FBS3lELFVBQVV6RCxNQUFNLElBQUlQLE1BQU1PLE1BQU0sR0FBRyxHQUFHO1lBQzNFVixPQUFPNEIsa0JBQWtCLENBQUMsd0JBQXdCdUMsVUFBVTVELElBQUksRUFBRyxpQkFBaUI0RCxVQUFVNUQsSUFBSSxFQUFHSjtRQUN6RztRQUNBLGtDQUFrQztRQUNsQyxJQUFJZ0UsVUFBVTNELFNBQVMsRUFBRTtZQUNyQkwsUUFBUVosZ0VBQVVBLENBQUNZO1lBQ25CLElBQUlBLE1BQU1PLE1BQU0sR0FBR3lELFVBQVUzRCxTQUFTLEVBQUU7Z0JBQ3BDUixPQUFPNEIsa0JBQWtCLENBQUMsd0JBQXdCdUMsVUFBVTVELElBQUksRUFBRyxpQkFBaUI0RCxVQUFVNUQsSUFBSSxFQUFHSjtZQUN6RztRQUNKO1FBQ0E4RCxJQUFJUCxJQUFJLENBQUN2RSw2REFBT0EsQ0FBQ2dCO0lBQ3JCO0lBQ0EsSUFBSVMsVUFBVTtJQUNkLElBQUl1QyxZQUFZdkMsT0FBTyxJQUFJLE1BQU07UUFDN0Isd0RBQXdEO1FBQ3hEQSxVQUFVdUMsWUFBWXZDLE9BQU87UUFDN0IsSUFBSSxPQUFRQSxZQUFhLFVBQVU7WUFDL0JaLE9BQU80QixrQkFBa0IsQ0FBQywrQkFBK0IsZUFBZXVCO1FBQzVFO0lBQ0osT0FDSyxJQUFJM0IsYUFBYSxDQUFDbkMsaUVBQVdBLENBQUNtQyxjQUFjQSxVQUFVOEMsQ0FBQyxHQUFHLElBQUk7UUFDL0QsaUZBQWlGO1FBQ2pGMUQsVUFBVTJELEtBQUtDLEtBQUssQ0FBQyxDQUFDaEQsVUFBVThDLENBQUMsR0FBRyxFQUFDLElBQUs7SUFDOUM7SUFDQSxzRUFBc0U7SUFDdEUsSUFBSTFELFlBQVksR0FBRztRQUNmcUQsSUFBSVAsSUFBSSxDQUFDdkUsNkRBQU9BLENBQUN5QixXQUFXLG1CQUFtQjtRQUMvQ3FELElBQUlQLElBQUksQ0FBQztRQUNUTyxJQUFJUCxJQUFJLENBQUM7SUFDYjtJQUNBLHFDQUFxQztJQUNyQyxJQUFJLENBQUNsQyxXQUFXO1FBQ1osT0FBTzdCLHNEQUFVLENBQUNzRTtJQUN0QjtJQUNBLDRFQUE0RTtJQUM1RSx3REFBd0Q7SUFDeEQsTUFBTVIsTUFBTW5FLG9FQUFjQSxDQUFDa0M7SUFDM0Isc0VBQXNFO0lBQ3RFLElBQUk4QyxJQUFJLEtBQUtiLElBQUlFLGFBQWE7SUFDOUIsSUFBSS9DLFlBQVksR0FBRztRQUNmcUQsSUFBSVEsR0FBRztRQUNQUixJQUFJUSxHQUFHO1FBQ1BSLElBQUlRLEdBQUc7UUFDUEgsS0FBSzFELFVBQVUsSUFBSTtRQUNuQiw4RUFBOEU7UUFDOUUsSUFBSTZDLElBQUlhLENBQUMsR0FBRyxNQUFNYixJQUFJYSxDQUFDLEtBQUtBLEdBQUc7WUFDM0J0RSxPQUFPNEIsa0JBQWtCLENBQUMsNENBQTRDLGFBQWFKO1FBQ3ZGO0lBQ0osT0FDSyxJQUFJaUMsSUFBSWEsQ0FBQyxLQUFLQSxHQUFHO1FBQ2xCdEUsT0FBTzRCLGtCQUFrQixDQUFDLDRDQUE0QyxhQUFhSjtJQUN2RjtJQUNBeUMsSUFBSVAsSUFBSSxDQUFDdkUsNkRBQU9BLENBQUNtRjtJQUNqQkwsSUFBSVAsSUFBSSxDQUFDbkUsZ0VBQVVBLENBQUNSLDhEQUFRQSxDQUFDMEUsSUFBSUcsQ0FBQztJQUNsQ0ssSUFBSVAsSUFBSSxDQUFDbkUsZ0VBQVVBLENBQUNSLDhEQUFRQSxDQUFDMEUsSUFBSUksQ0FBQztJQUNsQyxPQUFPbEUsc0RBQVUsQ0FBQ3NFO0FBQ3RCO0FBQ08sU0FBU1MsVUFBVXZCLFdBQVcsRUFBRTNCLFNBQVM7SUFDNUMsa0NBQWtDO0lBQ2xDLElBQUkyQixZQUFZakMsSUFBSSxJQUFJLFFBQVFpQyxZQUFZakMsSUFBSSxLQUFLLEdBQUc7UUFDcEQsSUFBSWlDLFlBQVlLLFVBQVUsSUFBSSxNQUFNO1lBQ2hDeEQsT0FBTzRCLGtCQUFrQixDQUFDLG1FQUFtRSxlQUFldUI7UUFDaEg7UUFDQSxPQUFPYSxXQUFXYixhQUFhM0I7SUFDbkM7SUFDQSxnQ0FBZ0M7SUFDaEMsT0FBUTJCLFlBQVlqQyxJQUFJO1FBQ3BCLEtBQUs7WUFDRCxPQUFPNkMsa0JBQWtCWixhQUFhM0I7UUFDMUMsS0FBSztZQUNELE9BQU8wQixrQkFBa0JDLGFBQWEzQjtRQUMxQztZQUNJO0lBQ1I7SUFDQSxPQUFPeEIsT0FBTzJFLFVBQVUsQ0FBQyxDQUFDLDhCQUE4QixFQUFFeEIsWUFBWWpDLElBQUksQ0FBQyxDQUFDLEVBQUVwQix5REFBTUEsQ0FBQzhFLE1BQU0sQ0FBQ0MscUJBQXFCLEVBQUU7UUFDL0dDLFdBQVc7UUFDWEMsaUJBQWlCNUIsWUFBWWpDLElBQUk7SUFDckM7QUFDSjtBQUNBLFNBQVM4RCxtQkFBbUJDLEVBQUUsRUFBRTNCLE1BQU0sRUFBRW9CLFNBQVM7SUFDN0MsSUFBSTtRQUNBLE1BQU1RLFFBQVE5RSxhQUFha0QsTUFBTSxDQUFDLEVBQUUsRUFBRTZCLFFBQVE7UUFDOUMsSUFBSUQsVUFBVSxLQUFLQSxVQUFVLEdBQUc7WUFDNUIsTUFBTSxJQUFJRSxNQUFNO1FBQ3BCO1FBQ0FILEdBQUdYLENBQUMsR0FBR1k7SUFDWCxFQUNBLE9BQU9HLE9BQU87UUFDVnJGLE9BQU80QixrQkFBa0IsQ0FBQyxxQ0FBcUMsS0FBSzBCLE1BQU0sQ0FBQyxFQUFFO0lBQ2pGO0lBQ0EyQixHQUFHckIsQ0FBQyxHQUFHeEUsZ0VBQVVBLENBQUNrRSxNQUFNLENBQUMsRUFBRSxFQUFFO0lBQzdCMkIsR0FBR3BCLENBQUMsR0FBR3pFLGdFQUFVQSxDQUFDa0UsTUFBTSxDQUFDLEVBQUUsRUFBRTtJQUM3QixJQUFJO1FBQ0EsTUFBTS9CLFNBQVM5QixtRUFBU0EsQ0FBQ2lGLFVBQVVPO1FBQ25DQSxHQUFHNUUsSUFBSSxHQUFHaUIsZUFBZUMsUUFBUTtZQUFFcUMsR0FBR3FCLEdBQUdyQixDQUFDO1lBQUVDLEdBQUdvQixHQUFHcEIsQ0FBQztZQUFFRixlQUFlc0IsR0FBR1gsQ0FBQztRQUFDO0lBQzdFLEVBQ0EsT0FBT2UsT0FBTyxDQUFFO0FBQ3BCO0FBQ0EsU0FBU0MsY0FBY0MsT0FBTztJQUMxQixNQUFNcEMsY0FBY3hELHNEQUFVLENBQUM0RixRQUFRRSxLQUFLLENBQUM7SUFDN0MsSUFBSXRDLFlBQVl6QyxNQUFNLEtBQUssS0FBS3lDLFlBQVl6QyxNQUFNLEtBQUssSUFBSTtRQUN2RFYsT0FBTzRCLGtCQUFrQixDQUFDLG1EQUFtRCxXQUFXekMsNkRBQU9BLENBQUNvRztJQUNwRztJQUNBLE1BQU1oQyx1QkFBdUJuRCxhQUFhK0MsV0FBVyxDQUFDLEVBQUU7SUFDeEQsTUFBTUMsZUFBZWhELGFBQWErQyxXQUFXLENBQUMsRUFBRTtJQUNoRCxNQUFNOEIsS0FBSztRQUNQL0QsTUFBTTtRQUNOTixTQUFTUixhQUFhK0MsV0FBVyxDQUFDLEVBQUUsRUFBRWdDLFFBQVE7UUFDOUNuRSxPQUFPWixhQUFhK0MsV0FBVyxDQUFDLEVBQUUsRUFBRWdDLFFBQVE7UUFDNUM1QixzQkFBc0JBO1FBQ3RCSCxjQUFjQTtRQUNkckMsVUFBVTtRQUNWRCxVQUFVVixhQUFhK0MsV0FBVyxDQUFDLEVBQUU7UUFDckNsQyxJQUFJZixjQUFjaUQsV0FBVyxDQUFDLEVBQUU7UUFDaENoRCxPQUFPQyxhQUFhK0MsV0FBVyxDQUFDLEVBQUU7UUFDbEN0QyxNQUFNc0MsV0FBVyxDQUFDLEVBQUU7UUFDcEJLLFlBQVluQixjQUFjYyxXQUFXLENBQUMsRUFBRTtJQUM1QztJQUNBLGdDQUFnQztJQUNoQyxJQUFJQSxZQUFZekMsTUFBTSxLQUFLLEdBQUc7UUFDMUIsT0FBT3VFO0lBQ1g7SUFDQUEsR0FBR1MsSUFBSSxHQUFHakcsbUVBQVNBLENBQUM4RjtJQUNwQlAsbUJBQW1CQyxJQUFJOUIsWUFBWXNDLEtBQUssQ0FBQyxJQUFJdkM7SUFDN0MsT0FBTytCO0FBQ1g7QUFDQSxTQUFTVSxjQUFjSixPQUFPO0lBQzFCLE1BQU1wQyxjQUFjeEQsc0RBQVUsQ0FBQzRGLFFBQVFFLEtBQUssQ0FBQztJQUM3QyxJQUFJdEMsWUFBWXpDLE1BQU0sS0FBSyxLQUFLeUMsWUFBWXpDLE1BQU0sS0FBSyxJQUFJO1FBQ3ZEVixPQUFPNEIsa0JBQWtCLENBQUMsbURBQW1ELFdBQVd6Qyw2REFBT0EsQ0FBQ29HO0lBQ3BHO0lBQ0EsTUFBTU4sS0FBSztRQUNQL0QsTUFBTTtRQUNOTixTQUFTUixhQUFhK0MsV0FBVyxDQUFDLEVBQUUsRUFBRWdDLFFBQVE7UUFDOUNuRSxPQUFPWixhQUFhK0MsV0FBVyxDQUFDLEVBQUUsRUFBRWdDLFFBQVE7UUFDNUNwRSxVQUFVWCxhQUFhK0MsV0FBVyxDQUFDLEVBQUU7UUFDckNyQyxVQUFVVixhQUFhK0MsV0FBVyxDQUFDLEVBQUU7UUFDckNsQyxJQUFJZixjQUFjaUQsV0FBVyxDQUFDLEVBQUU7UUFDaENoRCxPQUFPQyxhQUFhK0MsV0FBVyxDQUFDLEVBQUU7UUFDbEN0QyxNQUFNc0MsV0FBVyxDQUFDLEVBQUU7UUFDcEJLLFlBQVluQixjQUFjYyxXQUFXLENBQUMsRUFBRTtJQUM1QztJQUNBLGdDQUFnQztJQUNoQyxJQUFJQSxZQUFZekMsTUFBTSxLQUFLLEdBQUc7UUFDMUIsT0FBT3VFO0lBQ1g7SUFDQUEsR0FBR1MsSUFBSSxHQUFHakcsbUVBQVNBLENBQUM4RjtJQUNwQlAsbUJBQW1CQyxJQUFJOUIsWUFBWXNDLEtBQUssQ0FBQyxJQUFJMUI7SUFDN0MsT0FBT2tCO0FBQ1g7QUFDQSxrQ0FBa0M7QUFDbEMsU0FBU1csT0FBT0MsY0FBYztJQUMxQixNQUFNMUMsY0FBY3hELHNEQUFVLENBQUNrRztJQUMvQixJQUFJMUMsWUFBWXpDLE1BQU0sS0FBSyxLQUFLeUMsWUFBWXpDLE1BQU0sS0FBSyxHQUFHO1FBQ3REVixPQUFPNEIsa0JBQWtCLENBQUMsMkJBQTJCLGtCQUFrQmlFO0lBQzNFO0lBQ0EsTUFBTVosS0FBSztRQUNQakUsT0FBT1osYUFBYStDLFdBQVcsQ0FBQyxFQUFFLEVBQUVnQyxRQUFRO1FBQzVDcEUsVUFBVVgsYUFBYStDLFdBQVcsQ0FBQyxFQUFFO1FBQ3JDckMsVUFBVVYsYUFBYStDLFdBQVcsQ0FBQyxFQUFFO1FBQ3JDbEMsSUFBSWYsY0FBY2lELFdBQVcsQ0FBQyxFQUFFO1FBQ2hDaEQsT0FBT0MsYUFBYStDLFdBQVcsQ0FBQyxFQUFFO1FBQ2xDdEMsTUFBTXNDLFdBQVcsQ0FBQyxFQUFFO1FBQ3BCdkMsU0FBUztJQUNiO0lBQ0EsOEJBQThCO0lBQzlCLElBQUl1QyxZQUFZekMsTUFBTSxLQUFLLEdBQUc7UUFDMUIsT0FBT3VFO0lBQ1g7SUFDQSxJQUFJO1FBQ0FBLEdBQUdYLENBQUMsR0FBR3hGLCtEQUFTQSxDQUFDdUIsSUFBSSxDQUFDOEMsV0FBVyxDQUFDLEVBQUUsRUFBRWdDLFFBQVE7SUFDbEQsRUFDQSxPQUFPRSxPQUFPO1FBQ1Ysa0RBQWtEO1FBQ2xELE9BQU9KO0lBQ1g7SUFDQUEsR0FBR3JCLENBQUMsR0FBR3hFLGdFQUFVQSxDQUFDK0QsV0FBVyxDQUFDLEVBQUUsRUFBRTtJQUNsQzhCLEdBQUdwQixDQUFDLEdBQUd6RSxnRUFBVUEsQ0FBQytELFdBQVcsQ0FBQyxFQUFFLEVBQUU7SUFDbEMsSUFBSXJFLCtEQUFTQSxDQUFDdUIsSUFBSSxDQUFDNEUsR0FBR3JCLENBQUMsRUFBRWtDLE1BQU0sTUFBTWhILCtEQUFTQSxDQUFDdUIsSUFBSSxDQUFDNEUsR0FBR3BCLENBQUMsRUFBRWlDLE1BQU0sSUFBSTtRQUNoRSwrQkFBK0I7UUFDL0JiLEdBQUdyRSxPQUFPLEdBQUdxRSxHQUFHWCxDQUFDO1FBQ2pCVyxHQUFHWCxDQUFDLEdBQUc7SUFDWCxPQUNLO1FBQ0QscUJBQXFCO1FBQ3JCVyxHQUFHckUsT0FBTyxHQUFHMkQsS0FBS0MsS0FBSyxDQUFDLENBQUNTLEdBQUdYLENBQUMsR0FBRyxFQUFDLElBQUs7UUFDdEMsSUFBSVcsR0FBR3JFLE9BQU8sR0FBRyxHQUFHO1lBQ2hCcUUsR0FBR3JFLE9BQU8sR0FBRztRQUNqQjtRQUNBLElBQUkrQyxnQkFBZ0JzQixHQUFHWCxDQUFDLEdBQUc7UUFDM0IsTUFBTUwsTUFBTWQsWUFBWXNDLEtBQUssQ0FBQyxHQUFHO1FBQ2pDLElBQUlSLEdBQUdyRSxPQUFPLEtBQUssR0FBRztZQUNsQnFELElBQUlQLElBQUksQ0FBQ3ZFLDZEQUFPQSxDQUFDOEYsR0FBR3JFLE9BQU87WUFDM0JxRCxJQUFJUCxJQUFJLENBQUM7WUFDVE8sSUFBSVAsSUFBSSxDQUFDO1lBQ1RDLGlCQUFpQnNCLEdBQUdyRSxPQUFPLEdBQUcsSUFBSTtRQUN0QztRQUNBLE1BQU1XLFNBQVM5QixtRUFBU0EsQ0FBQ0Usc0RBQVUsQ0FBQ3NFO1FBQ3BDLElBQUk7WUFDQWdCLEdBQUc1RSxJQUFJLEdBQUdpQixlQUFlQyxRQUFRO2dCQUFFcUMsR0FBR3pFLDZEQUFPQSxDQUFDOEYsR0FBR3JCLENBQUM7Z0JBQUdDLEdBQUcxRSw2REFBT0EsQ0FBQzhGLEdBQUdwQixDQUFDO2dCQUFHRixlQUFlQTtZQUFjO1FBQ3hHLEVBQ0EsT0FBTzBCLE9BQU8sQ0FBRTtRQUNoQkosR0FBR1MsSUFBSSxHQUFHakcsbUVBQVNBLENBQUNvRztJQUN4QjtJQUNBWixHQUFHL0QsSUFBSSxHQUFHO0lBQ1YsT0FBTytEO0FBQ1g7QUFDTyxTQUFTYyxNQUFNRixjQUFjO0lBQ2hDLE1BQU1OLFVBQVV4Ryw4REFBUUEsQ0FBQzhHO0lBQ3pCLGtDQUFrQztJQUNsQyxJQUFJTixPQUFPLENBQUMsRUFBRSxHQUFHLE1BQU07UUFDbkIsT0FBT0ssT0FBT0w7SUFDbEI7SUFDQSwrQkFBK0I7SUFDL0IsT0FBUUEsT0FBTyxDQUFDLEVBQUU7UUFDZCxLQUFLO1lBQ0QsT0FBT0ksY0FBY0o7UUFDekIsS0FBSztZQUNELE9BQU9ELGNBQWNDO1FBQ3pCO1lBQ0k7SUFDUjtJQUNBLE9BQU92RixPQUFPMkUsVUFBVSxDQUFDLENBQUMsOEJBQThCLEVBQUVZLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFekYseURBQU1BLENBQUM4RSxNQUFNLENBQUNDLHFCQUFxQixFQUFFO1FBQ3pHQyxXQUFXO1FBQ1hDLGlCQUFpQlEsT0FBTyxDQUFDLEVBQUU7SUFDL0I7QUFDSixFQUNBLGlDQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NsaWVudC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AZXRoZXJzcHJvamVjdCt0cmFuc2FjdGlvbnNANS43LjAvbm9kZV9tb2R1bGVzL0BldGhlcnNwcm9qZWN0L3RyYW5zYWN0aW9ucy9saWIuZXNtL2luZGV4LmpzP2VjNWUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5pbXBvcnQgeyBnZXRBZGRyZXNzIH0gZnJvbSBcIkBldGhlcnNwcm9qZWN0L2FkZHJlc3NcIjtcbmltcG9ydCB7IEJpZ051bWJlciB9IGZyb20gXCJAZXRoZXJzcHJvamVjdC9iaWdudW1iZXJcIjtcbmltcG9ydCB7IGFycmF5aWZ5LCBoZXhDb25jYXQsIGhleERhdGFMZW5ndGgsIGhleERhdGFTbGljZSwgaGV4bGlmeSwgaGV4WmVyb1BhZCwgaXNCeXRlc0xpa2UsIHNwbGl0U2lnbmF0dXJlLCBzdHJpcFplcm9zLCB9IGZyb20gXCJAZXRoZXJzcHJvamVjdC9ieXRlc1wiO1xuaW1wb3J0IHsgWmVybyB9IGZyb20gXCJAZXRoZXJzcHJvamVjdC9jb25zdGFudHNcIjtcbmltcG9ydCB7IGtlY2NhazI1NiB9IGZyb20gXCJAZXRoZXJzcHJvamVjdC9rZWNjYWsyNTZcIjtcbmltcG9ydCB7IGNoZWNrUHJvcGVydGllcyB9IGZyb20gXCJAZXRoZXJzcHJvamVjdC9wcm9wZXJ0aWVzXCI7XG5pbXBvcnQgKiBhcyBSTFAgZnJvbSBcIkBldGhlcnNwcm9qZWN0L3JscFwiO1xuaW1wb3J0IHsgY29tcHV0ZVB1YmxpY0tleSwgcmVjb3ZlclB1YmxpY0tleSB9IGZyb20gXCJAZXRoZXJzcHJvamVjdC9zaWduaW5nLWtleVwiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIkBldGhlcnNwcm9qZWN0L2xvZ2dlclwiO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gXCIuL192ZXJzaW9uXCI7XG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKHZlcnNpb24pO1xuZXhwb3J0IHZhciBUcmFuc2FjdGlvblR5cGVzO1xuKGZ1bmN0aW9uIChUcmFuc2FjdGlvblR5cGVzKSB7XG4gICAgVHJhbnNhY3Rpb25UeXBlc1tUcmFuc2FjdGlvblR5cGVzW1wibGVnYWN5XCJdID0gMF0gPSBcImxlZ2FjeVwiO1xuICAgIFRyYW5zYWN0aW9uVHlwZXNbVHJhbnNhY3Rpb25UeXBlc1tcImVpcDI5MzBcIl0gPSAxXSA9IFwiZWlwMjkzMFwiO1xuICAgIFRyYW5zYWN0aW9uVHlwZXNbVHJhbnNhY3Rpb25UeXBlc1tcImVpcDE1NTlcIl0gPSAyXSA9IFwiZWlwMTU1OVwiO1xufSkoVHJhbnNhY3Rpb25UeXBlcyB8fCAoVHJhbnNhY3Rpb25UeXBlcyA9IHt9KSk7XG47XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5mdW5jdGlvbiBoYW5kbGVBZGRyZXNzKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSBcIjB4XCIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBnZXRBZGRyZXNzKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGhhbmRsZU51bWJlcih2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gXCIweFwiKSB7XG4gICAgICAgIHJldHVybiBaZXJvO1xuICAgIH1cbiAgICByZXR1cm4gQmlnTnVtYmVyLmZyb20odmFsdWUpO1xufVxuLy8gTGVnYWN5IFRyYW5zYWN0aW9uIEZpZWxkc1xuY29uc3QgdHJhbnNhY3Rpb25GaWVsZHMgPSBbXG4gICAgeyBuYW1lOiBcIm5vbmNlXCIsIG1heExlbmd0aDogMzIsIG51bWVyaWM6IHRydWUgfSxcbiAgICB7IG5hbWU6IFwiZ2FzUHJpY2VcIiwgbWF4TGVuZ3RoOiAzMiwgbnVtZXJpYzogdHJ1ZSB9LFxuICAgIHsgbmFtZTogXCJnYXNMaW1pdFwiLCBtYXhMZW5ndGg6IDMyLCBudW1lcmljOiB0cnVlIH0sXG4gICAgeyBuYW1lOiBcInRvXCIsIGxlbmd0aDogMjAgfSxcbiAgICB7IG5hbWU6IFwidmFsdWVcIiwgbWF4TGVuZ3RoOiAzMiwgbnVtZXJpYzogdHJ1ZSB9LFxuICAgIHsgbmFtZTogXCJkYXRhXCIgfSxcbl07XG5jb25zdCBhbGxvd2VkVHJhbnNhY3Rpb25LZXlzID0ge1xuICAgIGNoYWluSWQ6IHRydWUsIGRhdGE6IHRydWUsIGdhc0xpbWl0OiB0cnVlLCBnYXNQcmljZTogdHJ1ZSwgbm9uY2U6IHRydWUsIHRvOiB0cnVlLCB0eXBlOiB0cnVlLCB2YWx1ZTogdHJ1ZVxufTtcbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlQWRkcmVzcyhrZXkpIHtcbiAgICBjb25zdCBwdWJsaWNLZXkgPSBjb21wdXRlUHVibGljS2V5KGtleSk7XG4gICAgcmV0dXJuIGdldEFkZHJlc3MoaGV4RGF0YVNsaWNlKGtlY2NhazI1NihoZXhEYXRhU2xpY2UocHVibGljS2V5LCAxKSksIDEyKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVjb3ZlckFkZHJlc3MoZGlnZXN0LCBzaWduYXR1cmUpIHtcbiAgICByZXR1cm4gY29tcHV0ZUFkZHJlc3MocmVjb3ZlclB1YmxpY0tleShhcnJheWlmeShkaWdlc3QpLCBzaWduYXR1cmUpKTtcbn1cbmZ1bmN0aW9uIGZvcm1hdE51bWJlcih2YWx1ZSwgbmFtZSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHN0cmlwWmVyb3MoQmlnTnVtYmVyLmZyb20odmFsdWUpLnRvSGV4U3RyaW5nKCkpO1xuICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMzIpIHtcbiAgICAgICAgbG9nZ2VyLnRocm93QXJndW1lbnRFcnJvcihcImludmFsaWQgbGVuZ3RoIGZvciBcIiArIG5hbWUsIChcInRyYW5zYWN0aW9uOlwiICsgbmFtZSksIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGFjY2Vzc1NldGlmeShhZGRyLCBzdG9yYWdlS2V5cykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGFkZHJlc3M6IGdldEFkZHJlc3MoYWRkciksXG4gICAgICAgIHN0b3JhZ2VLZXlzOiAoc3RvcmFnZUtleXMgfHwgW10pLm1hcCgoc3RvcmFnZUtleSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChoZXhEYXRhTGVuZ3RoKHN0b3JhZ2VLZXkpICE9PSAzMikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci50aHJvd0FyZ3VtZW50RXJyb3IoXCJpbnZhbGlkIGFjY2VzcyBsaXN0IHN0b3JhZ2VLZXlcIiwgYGFjY2Vzc0xpc3RbJHthZGRyfToke2luZGV4fV1gLCBzdG9yYWdlS2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdG9yYWdlS2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0pXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhY2Nlc3NMaXN0aWZ5KHZhbHVlKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5tYXAoKHNldCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNldCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2V0Lmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLnRocm93QXJndW1lbnRFcnJvcihcImFjY2VzcyBsaXN0IGV4cGVjdGVkIHRvIGJlIFsgYWRkcmVzcywgc3RvcmFnZUtleXNbXSBdXCIsIGB2YWx1ZVske2luZGV4fV1gLCBzZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjZXNzU2V0aWZ5KHNldFswXSwgc2V0WzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY2Nlc3NTZXRpZnkoc2V0LmFkZHJlc3MsIHNldC5zdG9yYWdlS2V5cyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBPYmplY3Qua2V5cyh2YWx1ZSkubWFwKChhZGRyKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0b3JhZ2VLZXlzID0gdmFsdWVbYWRkcl0ucmVkdWNlKChhY2N1bSwgc3RvcmFnZUtleSkgPT4ge1xuICAgICAgICAgICAgYWNjdW1bc3RvcmFnZUtleV0gPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGFjY3VtO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIHJldHVybiBhY2Nlc3NTZXRpZnkoYWRkciwgT2JqZWN0LmtleXMoc3RvcmFnZUtleXMpLnNvcnQoKSk7XG4gICAgfSk7XG4gICAgcmVzdWx0LnNvcnQoKGEsIGIpID0+IChhLmFkZHJlc3MubG9jYWxlQ29tcGFyZShiLmFkZHJlc3MpKSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGZvcm1hdEFjY2Vzc0xpc3QodmFsdWUpIHtcbiAgICByZXR1cm4gYWNjZXNzTGlzdGlmeSh2YWx1ZSkubWFwKChzZXQpID0+IFtzZXQuYWRkcmVzcywgc2V0LnN0b3JhZ2VLZXlzXSk7XG59XG5mdW5jdGlvbiBfc2VyaWFsaXplRWlwMTU1OSh0cmFuc2FjdGlvbiwgc2lnbmF0dXJlKSB7XG4gICAgLy8gSWYgdGhlcmUgaXMgYW4gZXhwbGljaXQgZ2FzUHJpY2UsIG1ha2Ugc3VyZSBpdCBtYXRjaGVzIHRoZVxuICAgIC8vIEVJUC0xNTU5IGZlZXM7IG90aGVyd2lzZSB0aGV5IG1heSBub3QgdW5kZXJzdGFuZCB3aGF0IHRoZXlcbiAgICAvLyB0aGluayB0aGV5IGFyZSBzZXR0aW5nIGluIHRlcm1zIG9mIGZlZS5cbiAgICBpZiAodHJhbnNhY3Rpb24uZ2FzUHJpY2UgIT0gbnVsbCkge1xuICAgICAgICBjb25zdCBnYXNQcmljZSA9IEJpZ051bWJlci5mcm9tKHRyYW5zYWN0aW9uLmdhc1ByaWNlKTtcbiAgICAgICAgY29uc3QgbWF4RmVlUGVyR2FzID0gQmlnTnVtYmVyLmZyb20odHJhbnNhY3Rpb24ubWF4RmVlUGVyR2FzIHx8IDApO1xuICAgICAgICBpZiAoIWdhc1ByaWNlLmVxKG1heEZlZVBlckdhcykpIHtcbiAgICAgICAgICAgIGxvZ2dlci50aHJvd0FyZ3VtZW50RXJyb3IoXCJtaXNtYXRjaCBFSVAtMTU1OSBnYXNQcmljZSAhPSBtYXhGZWVQZXJHYXNcIiwgXCJ0eFwiLCB7XG4gICAgICAgICAgICAgICAgZ2FzUHJpY2UsIG1heEZlZVBlckdhc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZmllbGRzID0gW1xuICAgICAgICBmb3JtYXROdW1iZXIodHJhbnNhY3Rpb24uY2hhaW5JZCB8fCAwLCBcImNoYWluSWRcIiksXG4gICAgICAgIGZvcm1hdE51bWJlcih0cmFuc2FjdGlvbi5ub25jZSB8fCAwLCBcIm5vbmNlXCIpLFxuICAgICAgICBmb3JtYXROdW1iZXIodHJhbnNhY3Rpb24ubWF4UHJpb3JpdHlGZWVQZXJHYXMgfHwgMCwgXCJtYXhQcmlvcml0eUZlZVBlckdhc1wiKSxcbiAgICAgICAgZm9ybWF0TnVtYmVyKHRyYW5zYWN0aW9uLm1heEZlZVBlckdhcyB8fCAwLCBcIm1heEZlZVBlckdhc1wiKSxcbiAgICAgICAgZm9ybWF0TnVtYmVyKHRyYW5zYWN0aW9uLmdhc0xpbWl0IHx8IDAsIFwiZ2FzTGltaXRcIiksXG4gICAgICAgICgodHJhbnNhY3Rpb24udG8gIT0gbnVsbCkgPyBnZXRBZGRyZXNzKHRyYW5zYWN0aW9uLnRvKSA6IFwiMHhcIiksXG4gICAgICAgIGZvcm1hdE51bWJlcih0cmFuc2FjdGlvbi52YWx1ZSB8fCAwLCBcInZhbHVlXCIpLFxuICAgICAgICAodHJhbnNhY3Rpb24uZGF0YSB8fCBcIjB4XCIpLFxuICAgICAgICAoZm9ybWF0QWNjZXNzTGlzdCh0cmFuc2FjdGlvbi5hY2Nlc3NMaXN0IHx8IFtdKSlcbiAgICBdO1xuICAgIGlmIChzaWduYXR1cmUpIHtcbiAgICAgICAgY29uc3Qgc2lnID0gc3BsaXRTaWduYXR1cmUoc2lnbmF0dXJlKTtcbiAgICAgICAgZmllbGRzLnB1c2goZm9ybWF0TnVtYmVyKHNpZy5yZWNvdmVyeVBhcmFtLCBcInJlY292ZXJ5UGFyYW1cIikpO1xuICAgICAgICBmaWVsZHMucHVzaChzdHJpcFplcm9zKHNpZy5yKSk7XG4gICAgICAgIGZpZWxkcy5wdXNoKHN0cmlwWmVyb3Moc2lnLnMpKTtcbiAgICB9XG4gICAgcmV0dXJuIGhleENvbmNhdChbXCIweDAyXCIsIFJMUC5lbmNvZGUoZmllbGRzKV0pO1xufVxuZnVuY3Rpb24gX3NlcmlhbGl6ZUVpcDI5MzAodHJhbnNhY3Rpb24sIHNpZ25hdHVyZSkge1xuICAgIGNvbnN0IGZpZWxkcyA9IFtcbiAgICAgICAgZm9ybWF0TnVtYmVyKHRyYW5zYWN0aW9uLmNoYWluSWQgfHwgMCwgXCJjaGFpbklkXCIpLFxuICAgICAgICBmb3JtYXROdW1iZXIodHJhbnNhY3Rpb24ubm9uY2UgfHwgMCwgXCJub25jZVwiKSxcbiAgICAgICAgZm9ybWF0TnVtYmVyKHRyYW5zYWN0aW9uLmdhc1ByaWNlIHx8IDAsIFwiZ2FzUHJpY2VcIiksXG4gICAgICAgIGZvcm1hdE51bWJlcih0cmFuc2FjdGlvbi5nYXNMaW1pdCB8fCAwLCBcImdhc0xpbWl0XCIpLFxuICAgICAgICAoKHRyYW5zYWN0aW9uLnRvICE9IG51bGwpID8gZ2V0QWRkcmVzcyh0cmFuc2FjdGlvbi50bykgOiBcIjB4XCIpLFxuICAgICAgICBmb3JtYXROdW1iZXIodHJhbnNhY3Rpb24udmFsdWUgfHwgMCwgXCJ2YWx1ZVwiKSxcbiAgICAgICAgKHRyYW5zYWN0aW9uLmRhdGEgfHwgXCIweFwiKSxcbiAgICAgICAgKGZvcm1hdEFjY2Vzc0xpc3QodHJhbnNhY3Rpb24uYWNjZXNzTGlzdCB8fCBbXSkpXG4gICAgXTtcbiAgICBpZiAoc2lnbmF0dXJlKSB7XG4gICAgICAgIGNvbnN0IHNpZyA9IHNwbGl0U2lnbmF0dXJlKHNpZ25hdHVyZSk7XG4gICAgICAgIGZpZWxkcy5wdXNoKGZvcm1hdE51bWJlcihzaWcucmVjb3ZlcnlQYXJhbSwgXCJyZWNvdmVyeVBhcmFtXCIpKTtcbiAgICAgICAgZmllbGRzLnB1c2goc3RyaXBaZXJvcyhzaWcucikpO1xuICAgICAgICBmaWVsZHMucHVzaChzdHJpcFplcm9zKHNpZy5zKSk7XG4gICAgfVxuICAgIHJldHVybiBoZXhDb25jYXQoW1wiMHgwMVwiLCBSTFAuZW5jb2RlKGZpZWxkcyldKTtcbn1cbi8vIExlZ2FjeSBUcmFuc2FjdGlvbnMgYW5kIEVJUC0xNTVcbmZ1bmN0aW9uIF9zZXJpYWxpemUodHJhbnNhY3Rpb24sIHNpZ25hdHVyZSkge1xuICAgIGNoZWNrUHJvcGVydGllcyh0cmFuc2FjdGlvbiwgYWxsb3dlZFRyYW5zYWN0aW9uS2V5cyk7XG4gICAgY29uc3QgcmF3ID0gW107XG4gICAgdHJhbnNhY3Rpb25GaWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGRJbmZvKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHRyYW5zYWN0aW9uW2ZpZWxkSW5mby5uYW1lXSB8fCAoW10pO1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge307XG4gICAgICAgIGlmIChmaWVsZEluZm8ubnVtZXJpYykge1xuICAgICAgICAgICAgb3B0aW9ucy5oZXhQYWQgPSBcImxlZnRcIjtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IGFycmF5aWZ5KGhleGxpZnkodmFsdWUsIG9wdGlvbnMpKTtcbiAgICAgICAgLy8gRml4ZWQtd2lkdGggZmllbGRcbiAgICAgICAgaWYgKGZpZWxkSW5mby5sZW5ndGggJiYgdmFsdWUubGVuZ3RoICE9PSBmaWVsZEluZm8ubGVuZ3RoICYmIHZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxvZ2dlci50aHJvd0FyZ3VtZW50RXJyb3IoXCJpbnZhbGlkIGxlbmd0aCBmb3IgXCIgKyBmaWVsZEluZm8ubmFtZSwgKFwidHJhbnNhY3Rpb246XCIgKyBmaWVsZEluZm8ubmFtZSksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBWYXJpYWJsZS13aWR0aCAod2l0aCBhIG1heGltdW0pXG4gICAgICAgIGlmIChmaWVsZEluZm8ubWF4TGVuZ3RoKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHN0cmlwWmVyb3ModmFsdWUpO1xuICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA+IGZpZWxkSW5mby5tYXhMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIudGhyb3dBcmd1bWVudEVycm9yKFwiaW52YWxpZCBsZW5ndGggZm9yIFwiICsgZmllbGRJbmZvLm5hbWUsIChcInRyYW5zYWN0aW9uOlwiICsgZmllbGRJbmZvLm5hbWUpLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmF3LnB1c2goaGV4bGlmeSh2YWx1ZSkpO1xuICAgIH0pO1xuICAgIGxldCBjaGFpbklkID0gMDtcbiAgICBpZiAodHJhbnNhY3Rpb24uY2hhaW5JZCAhPSBudWxsKSB7XG4gICAgICAgIC8vIEEgY2hhaW5JZCB3YXMgcHJvdmlkZWQ7IGlmIG5vbi16ZXJvIHdlJ2xsIHVzZSBFSVAtMTU1XG4gICAgICAgIGNoYWluSWQgPSB0cmFuc2FjdGlvbi5jaGFpbklkO1xuICAgICAgICBpZiAodHlwZW9mIChjaGFpbklkKSAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgbG9nZ2VyLnRocm93QXJndW1lbnRFcnJvcihcImludmFsaWQgdHJhbnNhY3Rpb24uY2hhaW5JZFwiLCBcInRyYW5zYWN0aW9uXCIsIHRyYW5zYWN0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChzaWduYXR1cmUgJiYgIWlzQnl0ZXNMaWtlKHNpZ25hdHVyZSkgJiYgc2lnbmF0dXJlLnYgPiAyOCkge1xuICAgICAgICAvLyBObyBjaGFpbklkIHByb3ZpZGVkLCBidXQgdGhlIHNpZ25hdHVyZSBpcyBzaWduaW5nIHdpdGggRUlQLTE1NTsgZGVyaXZlIGNoYWluSWRcbiAgICAgICAgY2hhaW5JZCA9IE1hdGguZmxvb3IoKHNpZ25hdHVyZS52IC0gMzUpIC8gMik7XG4gICAgfVxuICAgIC8vIFdlIGhhdmUgYW4gRUlQLTE1NSB0cmFuc2FjdGlvbiAoY2hhaW5JZCB3YXMgc3BlY2lmaWVkIGFuZCBub24temVybylcbiAgICBpZiAoY2hhaW5JZCAhPT0gMCkge1xuICAgICAgICByYXcucHVzaChoZXhsaWZ5KGNoYWluSWQpKTsgLy8gQFRPRE86IGhleFZhbHVlP1xuICAgICAgICByYXcucHVzaChcIjB4XCIpO1xuICAgICAgICByYXcucHVzaChcIjB4XCIpO1xuICAgIH1cbiAgICAvLyBSZXF1ZXN0aW5nIGFuIHVuc2lnbmVkIHRyYW5zYWN0aW9uXG4gICAgaWYgKCFzaWduYXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIFJMUC5lbmNvZGUocmF3KTtcbiAgICB9XG4gICAgLy8gVGhlIHNwbGl0U2lnbmF0dXJlIHdpbGwgZW5zdXJlIHRoZSB0cmFuc2FjdGlvbiBoYXMgYSByZWNvdmVyeVBhcmFtIGluIHRoZVxuICAgIC8vIGNhc2UgdGhhdCB0aGUgc2lnblRyYW5zYWN0aW9uIGZ1bmN0aW9uIG9ubHkgYWRkcyBhIHYuXG4gICAgY29uc3Qgc2lnID0gc3BsaXRTaWduYXR1cmUoc2lnbmF0dXJlKTtcbiAgICAvLyBXZSBwdXNoZWQgYSBjaGFpbklkIGFuZCBudWxsIHIsIHMgb24gZm9yIGhhc2hpbmcgb25seTsgcmVtb3ZlIHRob3NlXG4gICAgbGV0IHYgPSAyNyArIHNpZy5yZWNvdmVyeVBhcmFtO1xuICAgIGlmIChjaGFpbklkICE9PSAwKSB7XG4gICAgICAgIHJhdy5wb3AoKTtcbiAgICAgICAgcmF3LnBvcCgpO1xuICAgICAgICByYXcucG9wKCk7XG4gICAgICAgIHYgKz0gY2hhaW5JZCAqIDIgKyA4O1xuICAgICAgICAvLyBJZiBhbiBFSVAtMTU1IHYgKGRpcmVjdGx5IG9yIGluZGlyZWN0bHk7IG1heWJlIF92cykgd2FzIHByb3ZpZGVkLCBjaGVjayBpdCFcbiAgICAgICAgaWYgKHNpZy52ID4gMjggJiYgc2lnLnYgIT09IHYpIHtcbiAgICAgICAgICAgIGxvZ2dlci50aHJvd0FyZ3VtZW50RXJyb3IoXCJ0cmFuc2FjdGlvbi5jaGFpbklkL3NpZ25hdHVyZS52IG1pc21hdGNoXCIsIFwic2lnbmF0dXJlXCIsIHNpZ25hdHVyZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoc2lnLnYgIT09IHYpIHtcbiAgICAgICAgbG9nZ2VyLnRocm93QXJndW1lbnRFcnJvcihcInRyYW5zYWN0aW9uLmNoYWluSWQvc2lnbmF0dXJlLnYgbWlzbWF0Y2hcIiwgXCJzaWduYXR1cmVcIiwgc2lnbmF0dXJlKTtcbiAgICB9XG4gICAgcmF3LnB1c2goaGV4bGlmeSh2KSk7XG4gICAgcmF3LnB1c2goc3RyaXBaZXJvcyhhcnJheWlmeShzaWcucikpKTtcbiAgICByYXcucHVzaChzdHJpcFplcm9zKGFycmF5aWZ5KHNpZy5zKSkpO1xuICAgIHJldHVybiBSTFAuZW5jb2RlKHJhdyk7XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplKHRyYW5zYWN0aW9uLCBzaWduYXR1cmUpIHtcbiAgICAvLyBMZWdhY3kgYW5kIEVJUC0xNTUgVHJhbnNhY3Rpb25zXG4gICAgaWYgKHRyYW5zYWN0aW9uLnR5cGUgPT0gbnVsbCB8fCB0cmFuc2FjdGlvbi50eXBlID09PSAwKSB7XG4gICAgICAgIGlmICh0cmFuc2FjdGlvbi5hY2Nlc3NMaXN0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGxvZ2dlci50aHJvd0FyZ3VtZW50RXJyb3IoXCJ1bnR5cGVkIHRyYW5zYWN0aW9ucyBkbyBub3Qgc3VwcG9ydCBhY2Nlc3NMaXN0OyBpbmNsdWRlIHR5cGU6IDFcIiwgXCJ0cmFuc2FjdGlvblwiLCB0cmFuc2FjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9zZXJpYWxpemUodHJhbnNhY3Rpb24sIHNpZ25hdHVyZSk7XG4gICAgfVxuICAgIC8vIFR5cGVkIFRyYW5zYWN0aW9ucyAoRUlQLTI3MTgpXG4gICAgc3dpdGNoICh0cmFuc2FjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBfc2VyaWFsaXplRWlwMjkzMCh0cmFuc2FjdGlvbiwgc2lnbmF0dXJlKTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIF9zZXJpYWxpemVFaXAxNTU5KHRyYW5zYWN0aW9uLCBzaWduYXR1cmUpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBsb2dnZXIudGhyb3dFcnJvcihgdW5zdXBwb3J0ZWQgdHJhbnNhY3Rpb24gdHlwZTogJHt0cmFuc2FjdGlvbi50eXBlfWAsIExvZ2dlci5lcnJvcnMuVU5TVVBQT1JURURfT1BFUkFUSU9OLCB7XG4gICAgICAgIG9wZXJhdGlvbjogXCJzZXJpYWxpemVUcmFuc2FjdGlvblwiLFxuICAgICAgICB0cmFuc2FjdGlvblR5cGU6IHRyYW5zYWN0aW9uLnR5cGVcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIF9wYXJzZUVpcFNpZ25hdHVyZSh0eCwgZmllbGRzLCBzZXJpYWxpemUpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZWNpZCA9IGhhbmRsZU51bWJlcihmaWVsZHNbMF0pLnRvTnVtYmVyKCk7XG4gICAgICAgIGlmIChyZWNpZCAhPT0gMCAmJiByZWNpZCAhPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYmFkIHJlY2lkXCIpO1xuICAgICAgICB9XG4gICAgICAgIHR4LnYgPSByZWNpZDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci50aHJvd0FyZ3VtZW50RXJyb3IoXCJpbnZhbGlkIHYgZm9yIHRyYW5zYWN0aW9uIHR5cGU6IDFcIiwgXCJ2XCIsIGZpZWxkc1swXSk7XG4gICAgfVxuICAgIHR4LnIgPSBoZXhaZXJvUGFkKGZpZWxkc1sxXSwgMzIpO1xuICAgIHR4LnMgPSBoZXhaZXJvUGFkKGZpZWxkc1syXSwgMzIpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRpZ2VzdCA9IGtlY2NhazI1NihzZXJpYWxpemUodHgpKTtcbiAgICAgICAgdHguZnJvbSA9IHJlY292ZXJBZGRyZXNzKGRpZ2VzdCwgeyByOiB0eC5yLCBzOiB0eC5zLCByZWNvdmVyeVBhcmFtOiB0eC52IH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHsgfVxufVxuZnVuY3Rpb24gX3BhcnNlRWlwMTU1OShwYXlsb2FkKSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBSTFAuZGVjb2RlKHBheWxvYWQuc2xpY2UoMSkpO1xuICAgIGlmICh0cmFuc2FjdGlvbi5sZW5ndGggIT09IDkgJiYgdHJhbnNhY3Rpb24ubGVuZ3RoICE9PSAxMikge1xuICAgICAgICBsb2dnZXIudGhyb3dBcmd1bWVudEVycm9yKFwiaW52YWxpZCBjb21wb25lbnQgY291bnQgZm9yIHRyYW5zYWN0aW9uIHR5cGU6IDJcIiwgXCJwYXlsb2FkXCIsIGhleGxpZnkocGF5bG9hZCkpO1xuICAgIH1cbiAgICBjb25zdCBtYXhQcmlvcml0eUZlZVBlckdhcyA9IGhhbmRsZU51bWJlcih0cmFuc2FjdGlvblsyXSk7XG4gICAgY29uc3QgbWF4RmVlUGVyR2FzID0gaGFuZGxlTnVtYmVyKHRyYW5zYWN0aW9uWzNdKTtcbiAgICBjb25zdCB0eCA9IHtcbiAgICAgICAgdHlwZTogMixcbiAgICAgICAgY2hhaW5JZDogaGFuZGxlTnVtYmVyKHRyYW5zYWN0aW9uWzBdKS50b051bWJlcigpLFxuICAgICAgICBub25jZTogaGFuZGxlTnVtYmVyKHRyYW5zYWN0aW9uWzFdKS50b051bWJlcigpLFxuICAgICAgICBtYXhQcmlvcml0eUZlZVBlckdhczogbWF4UHJpb3JpdHlGZWVQZXJHYXMsXG4gICAgICAgIG1heEZlZVBlckdhczogbWF4RmVlUGVyR2FzLFxuICAgICAgICBnYXNQcmljZTogbnVsbCxcbiAgICAgICAgZ2FzTGltaXQ6IGhhbmRsZU51bWJlcih0cmFuc2FjdGlvbls0XSksXG4gICAgICAgIHRvOiBoYW5kbGVBZGRyZXNzKHRyYW5zYWN0aW9uWzVdKSxcbiAgICAgICAgdmFsdWU6IGhhbmRsZU51bWJlcih0cmFuc2FjdGlvbls2XSksXG4gICAgICAgIGRhdGE6IHRyYW5zYWN0aW9uWzddLFxuICAgICAgICBhY2Nlc3NMaXN0OiBhY2Nlc3NMaXN0aWZ5KHRyYW5zYWN0aW9uWzhdKSxcbiAgICB9O1xuICAgIC8vIFVuc2lnbmVkIEVJUC0xNTU5IFRyYW5zYWN0aW9uXG4gICAgaWYgKHRyYW5zYWN0aW9uLmxlbmd0aCA9PT0gOSkge1xuICAgICAgICByZXR1cm4gdHg7XG4gICAgfVxuICAgIHR4Lmhhc2ggPSBrZWNjYWsyNTYocGF5bG9hZCk7XG4gICAgX3BhcnNlRWlwU2lnbmF0dXJlKHR4LCB0cmFuc2FjdGlvbi5zbGljZSg5KSwgX3NlcmlhbGl6ZUVpcDE1NTkpO1xuICAgIHJldHVybiB0eDtcbn1cbmZ1bmN0aW9uIF9wYXJzZUVpcDI5MzAocGF5bG9hZCkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gUkxQLmRlY29kZShwYXlsb2FkLnNsaWNlKDEpKTtcbiAgICBpZiAodHJhbnNhY3Rpb24ubGVuZ3RoICE9PSA4ICYmIHRyYW5zYWN0aW9uLmxlbmd0aCAhPT0gMTEpIHtcbiAgICAgICAgbG9nZ2VyLnRocm93QXJndW1lbnRFcnJvcihcImludmFsaWQgY29tcG9uZW50IGNvdW50IGZvciB0cmFuc2FjdGlvbiB0eXBlOiAxXCIsIFwicGF5bG9hZFwiLCBoZXhsaWZ5KHBheWxvYWQpKTtcbiAgICB9XG4gICAgY29uc3QgdHggPSB7XG4gICAgICAgIHR5cGU6IDEsXG4gICAgICAgIGNoYWluSWQ6IGhhbmRsZU51bWJlcih0cmFuc2FjdGlvblswXSkudG9OdW1iZXIoKSxcbiAgICAgICAgbm9uY2U6IGhhbmRsZU51bWJlcih0cmFuc2FjdGlvblsxXSkudG9OdW1iZXIoKSxcbiAgICAgICAgZ2FzUHJpY2U6IGhhbmRsZU51bWJlcih0cmFuc2FjdGlvblsyXSksXG4gICAgICAgIGdhc0xpbWl0OiBoYW5kbGVOdW1iZXIodHJhbnNhY3Rpb25bM10pLFxuICAgICAgICB0bzogaGFuZGxlQWRkcmVzcyh0cmFuc2FjdGlvbls0XSksXG4gICAgICAgIHZhbHVlOiBoYW5kbGVOdW1iZXIodHJhbnNhY3Rpb25bNV0pLFxuICAgICAgICBkYXRhOiB0cmFuc2FjdGlvbls2XSxcbiAgICAgICAgYWNjZXNzTGlzdDogYWNjZXNzTGlzdGlmeSh0cmFuc2FjdGlvbls3XSlcbiAgICB9O1xuICAgIC8vIFVuc2lnbmVkIEVJUC0yOTMwIFRyYW5zYWN0aW9uXG4gICAgaWYgKHRyYW5zYWN0aW9uLmxlbmd0aCA9PT0gOCkge1xuICAgICAgICByZXR1cm4gdHg7XG4gICAgfVxuICAgIHR4Lmhhc2ggPSBrZWNjYWsyNTYocGF5bG9hZCk7XG4gICAgX3BhcnNlRWlwU2lnbmF0dXJlKHR4LCB0cmFuc2FjdGlvbi5zbGljZSg4KSwgX3NlcmlhbGl6ZUVpcDI5MzApO1xuICAgIHJldHVybiB0eDtcbn1cbi8vIExlZ2FjeSBUcmFuc2FjdGlvbnMgYW5kIEVJUC0xNTVcbmZ1bmN0aW9uIF9wYXJzZShyYXdUcmFuc2FjdGlvbikge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gUkxQLmRlY29kZShyYXdUcmFuc2FjdGlvbik7XG4gICAgaWYgKHRyYW5zYWN0aW9uLmxlbmd0aCAhPT0gOSAmJiB0cmFuc2FjdGlvbi5sZW5ndGggIT09IDYpIHtcbiAgICAgICAgbG9nZ2VyLnRocm93QXJndW1lbnRFcnJvcihcImludmFsaWQgcmF3IHRyYW5zYWN0aW9uXCIsIFwicmF3VHJhbnNhY3Rpb25cIiwgcmF3VHJhbnNhY3Rpb24pO1xuICAgIH1cbiAgICBjb25zdCB0eCA9IHtcbiAgICAgICAgbm9uY2U6IGhhbmRsZU51bWJlcih0cmFuc2FjdGlvblswXSkudG9OdW1iZXIoKSxcbiAgICAgICAgZ2FzUHJpY2U6IGhhbmRsZU51bWJlcih0cmFuc2FjdGlvblsxXSksXG4gICAgICAgIGdhc0xpbWl0OiBoYW5kbGVOdW1iZXIodHJhbnNhY3Rpb25bMl0pLFxuICAgICAgICB0bzogaGFuZGxlQWRkcmVzcyh0cmFuc2FjdGlvblszXSksXG4gICAgICAgIHZhbHVlOiBoYW5kbGVOdW1iZXIodHJhbnNhY3Rpb25bNF0pLFxuICAgICAgICBkYXRhOiB0cmFuc2FjdGlvbls1XSxcbiAgICAgICAgY2hhaW5JZDogMFxuICAgIH07XG4gICAgLy8gTGVnYWN5IHVuc2lnbmVkIHRyYW5zYWN0aW9uXG4gICAgaWYgKHRyYW5zYWN0aW9uLmxlbmd0aCA9PT0gNikge1xuICAgICAgICByZXR1cm4gdHg7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIHR4LnYgPSBCaWdOdW1iZXIuZnJvbSh0cmFuc2FjdGlvbls2XSkudG9OdW1iZXIoKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIEBUT0RPOiBXaGF0IG1ha2VzIHNuZXNlIHRvIGRvPyBUaGUgdiBpcyB0b28gYmlnXG4gICAgICAgIHJldHVybiB0eDtcbiAgICB9XG4gICAgdHguciA9IGhleFplcm9QYWQodHJhbnNhY3Rpb25bN10sIDMyKTtcbiAgICB0eC5zID0gaGV4WmVyb1BhZCh0cmFuc2FjdGlvbls4XSwgMzIpO1xuICAgIGlmIChCaWdOdW1iZXIuZnJvbSh0eC5yKS5pc1plcm8oKSAmJiBCaWdOdW1iZXIuZnJvbSh0eC5zKS5pc1plcm8oKSkge1xuICAgICAgICAvLyBFSVAtMTU1IHVuc2lnbmVkIHRyYW5zYWN0aW9uXG4gICAgICAgIHR4LmNoYWluSWQgPSB0eC52O1xuICAgICAgICB0eC52ID0gMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFNpZ25lZCBUcmFuc2FjdGlvblxuICAgICAgICB0eC5jaGFpbklkID0gTWF0aC5mbG9vcigodHgudiAtIDM1KSAvIDIpO1xuICAgICAgICBpZiAodHguY2hhaW5JZCA8IDApIHtcbiAgICAgICAgICAgIHR4LmNoYWluSWQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZWNvdmVyeVBhcmFtID0gdHgudiAtIDI3O1xuICAgICAgICBjb25zdCByYXcgPSB0cmFuc2FjdGlvbi5zbGljZSgwLCA2KTtcbiAgICAgICAgaWYgKHR4LmNoYWluSWQgIT09IDApIHtcbiAgICAgICAgICAgIHJhdy5wdXNoKGhleGxpZnkodHguY2hhaW5JZCkpO1xuICAgICAgICAgICAgcmF3LnB1c2goXCIweFwiKTtcbiAgICAgICAgICAgIHJhdy5wdXNoKFwiMHhcIik7XG4gICAgICAgICAgICByZWNvdmVyeVBhcmFtIC09IHR4LmNoYWluSWQgKiAyICsgODtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaWdlc3QgPSBrZWNjYWsyNTYoUkxQLmVuY29kZShyYXcpKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHR4LmZyb20gPSByZWNvdmVyQWRkcmVzcyhkaWdlc3QsIHsgcjogaGV4bGlmeSh0eC5yKSwgczogaGV4bGlmeSh0eC5zKSwgcmVjb3ZlcnlQYXJhbTogcmVjb3ZlcnlQYXJhbSB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHsgfVxuICAgICAgICB0eC5oYXNoID0ga2VjY2FrMjU2KHJhd1RyYW5zYWN0aW9uKTtcbiAgICB9XG4gICAgdHgudHlwZSA9IG51bGw7XG4gICAgcmV0dXJuIHR4O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlKHJhd1RyYW5zYWN0aW9uKSB7XG4gICAgY29uc3QgcGF5bG9hZCA9IGFycmF5aWZ5KHJhd1RyYW5zYWN0aW9uKTtcbiAgICAvLyBMZWdhY3kgYW5kIEVJUC0xNTUgVHJhbnNhY3Rpb25zXG4gICAgaWYgKHBheWxvYWRbMF0gPiAweDdmKSB7XG4gICAgICAgIHJldHVybiBfcGFyc2UocGF5bG9hZCk7XG4gICAgfVxuICAgIC8vIFR5cGVkIFRyYW5zYWN0aW9uIChFSVAtMjcxOClcbiAgICBzd2l0Y2ggKHBheWxvYWRbMF0pIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIF9wYXJzZUVpcDI5MzAocGF5bG9hZCk7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBfcGFyc2VFaXAxNTU5KHBheWxvYWQpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBsb2dnZXIudGhyb3dFcnJvcihgdW5zdXBwb3J0ZWQgdHJhbnNhY3Rpb24gdHlwZTogJHtwYXlsb2FkWzBdfWAsIExvZ2dlci5lcnJvcnMuVU5TVVBQT1JURURfT1BFUkFUSU9OLCB7XG4gICAgICAgIG9wZXJhdGlvbjogXCJwYXJzZVRyYW5zYWN0aW9uXCIsXG4gICAgICAgIHRyYW5zYWN0aW9uVHlwZTogcGF5bG9hZFswXVxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbImdldEFkZHJlc3MiLCJCaWdOdW1iZXIiLCJhcnJheWlmeSIsImhleENvbmNhdCIsImhleERhdGFMZW5ndGgiLCJoZXhEYXRhU2xpY2UiLCJoZXhsaWZ5IiwiaGV4WmVyb1BhZCIsImlzQnl0ZXNMaWtlIiwic3BsaXRTaWduYXR1cmUiLCJzdHJpcFplcm9zIiwiWmVybyIsImtlY2NhazI1NiIsImNoZWNrUHJvcGVydGllcyIsIlJMUCIsImNvbXB1dGVQdWJsaWNLZXkiLCJyZWNvdmVyUHVibGljS2V5IiwiTG9nZ2VyIiwidmVyc2lvbiIsImxvZ2dlciIsIlRyYW5zYWN0aW9uVHlwZXMiLCJoYW5kbGVBZGRyZXNzIiwidmFsdWUiLCJoYW5kbGVOdW1iZXIiLCJmcm9tIiwidHJhbnNhY3Rpb25GaWVsZHMiLCJuYW1lIiwibWF4TGVuZ3RoIiwibnVtZXJpYyIsImxlbmd0aCIsImFsbG93ZWRUcmFuc2FjdGlvbktleXMiLCJjaGFpbklkIiwiZGF0YSIsImdhc0xpbWl0IiwiZ2FzUHJpY2UiLCJub25jZSIsInRvIiwidHlwZSIsImNvbXB1dGVBZGRyZXNzIiwia2V5IiwicHVibGljS2V5IiwicmVjb3ZlckFkZHJlc3MiLCJkaWdlc3QiLCJzaWduYXR1cmUiLCJmb3JtYXROdW1iZXIiLCJyZXN1bHQiLCJ0b0hleFN0cmluZyIsInRocm93QXJndW1lbnRFcnJvciIsImFjY2Vzc1NldGlmeSIsImFkZHIiLCJzdG9yYWdlS2V5cyIsImFkZHJlc3MiLCJtYXAiLCJzdG9yYWdlS2V5IiwiaW5kZXgiLCJ0b0xvd2VyQ2FzZSIsImFjY2Vzc0xpc3RpZnkiLCJBcnJheSIsImlzQXJyYXkiLCJzZXQiLCJPYmplY3QiLCJrZXlzIiwicmVkdWNlIiwiYWNjdW0iLCJzb3J0IiwiYSIsImIiLCJsb2NhbGVDb21wYXJlIiwiZm9ybWF0QWNjZXNzTGlzdCIsIl9zZXJpYWxpemVFaXAxNTU5IiwidHJhbnNhY3Rpb24iLCJtYXhGZWVQZXJHYXMiLCJlcSIsImZpZWxkcyIsIm1heFByaW9yaXR5RmVlUGVyR2FzIiwiYWNjZXNzTGlzdCIsInNpZyIsInB1c2giLCJyZWNvdmVyeVBhcmFtIiwiciIsInMiLCJlbmNvZGUiLCJfc2VyaWFsaXplRWlwMjkzMCIsIl9zZXJpYWxpemUiLCJyYXciLCJmb3JFYWNoIiwiZmllbGRJbmZvIiwib3B0aW9ucyIsImhleFBhZCIsInYiLCJNYXRoIiwiZmxvb3IiLCJwb3AiLCJzZXJpYWxpemUiLCJ0aHJvd0Vycm9yIiwiZXJyb3JzIiwiVU5TVVBQT1JURURfT1BFUkFUSU9OIiwib3BlcmF0aW9uIiwidHJhbnNhY3Rpb25UeXBlIiwiX3BhcnNlRWlwU2lnbmF0dXJlIiwidHgiLCJyZWNpZCIsInRvTnVtYmVyIiwiRXJyb3IiLCJlcnJvciIsIl9wYXJzZUVpcDE1NTkiLCJwYXlsb2FkIiwiZGVjb2RlIiwic2xpY2UiLCJoYXNoIiwiX3BhcnNlRWlwMjkzMCIsIl9wYXJzZSIsInJhd1RyYW5zYWN0aW9uIiwiaXNaZXJvIiwicGFyc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@ethersproject+transactions@5.7.0/node_modules/@ethersproject/transactions/lib.esm/index.js\n");

/***/ })

};
;